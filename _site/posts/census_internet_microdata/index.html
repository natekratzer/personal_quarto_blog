<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2020-09-13">
<meta name="description" content="This post is a start to finish descriptive analysis of high speed internet access in Kentucky, including tables, graphs, and maps. All of the detail of cleaning the data and iterating while exploring the data is included. This makes for a rather lengthy post, but it also makes it relatively unique in including all of those steps. We go through five attempts at making a table of high speed internet before finally getting it right! There’s quite a bit of cleaning work and then also a detour into calculating standard errors via bootstrap so we can correctly display uncertainty in our visuals.">

<title>Nate Kratzer - How to Use Census Microdata to Analyze High Speed Internet in Kentucky</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-9PPZMMCZD8"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-9PPZMMCZD8', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Nate Kratzer</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/natekratzer"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://fosstodon.org/@natekratzer"><i class="bi bi-mastodon" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#getting-the-data" id="toc-getting-the-data" class="nav-link" data-scroll-target="#getting-the-data">Getting the Data</a></li>
  <li><a href="#cleaning-the-data" id="toc-cleaning-the-data" class="nav-link" data-scroll-target="#cleaning-the-data">Cleaning the Data</a>
  <ul class="collapse">
  <li><a href="#getting-wrong-answers-by-not-knowing-the-data" id="toc-getting-wrong-answers-by-not-knowing-the-data" class="nav-link" data-scroll-target="#getting-wrong-answers-by-not-knowing-the-data">Getting wrong answers by not knowing the data</a></li>
  <li><a href="#group-quarters-in-the-census" id="toc-group-quarters-in-the-census" class="nav-link" data-scroll-target="#group-quarters-in-the-census">Group Quarters in the Census</a></li>
  <li><a href="#checking-against-data.census.gov" id="toc-checking-against-data.census.gov" class="nav-link" data-scroll-target="#checking-against-data.census.gov">Checking against data.census.gov</a></li>
  </ul></li>
  <li><a href="#analysis" id="toc-analysis" class="nav-link" data-scroll-target="#analysis">Analysis</a>
  <ul class="collapse">
  <li><a href="#standard-errors" id="toc-standard-errors" class="nav-link" data-scroll-target="#standard-errors">Standard Errors</a></li>
  <li><a href="#checking-our-results-against-the-survey-package" id="toc-checking-our-results-against-the-survey-package" class="nav-link" data-scroll-target="#checking-our-results-against-the-survey-package">Checking our results against the survey package</a></li>
  <li><a href="#writing-a-bootstrap-function" id="toc-writing-a-bootstrap-function" class="nav-link" data-scroll-target="#writing-a-bootstrap-function">Writing a bootstrap function</a></li>
  <li><a href="#race-poverty-age-and-geography" id="toc-race-poverty-age-and-geography" class="nav-link" data-scroll-target="#race-poverty-age-and-geography">Race, Poverty, Age, and Geography</a>
  <ul class="collapse">
  <li><a href="#race" id="toc-race" class="nav-link" data-scroll-target="#race">Race</a></li>
  <li><a href="#poverty-status" id="toc-poverty-status" class="nav-link" data-scroll-target="#poverty-status">Poverty Status</a></li>
  <li><a href="#age" id="toc-age" class="nav-link" data-scroll-target="#age">Age</a></li>
  <li><a href="#geography" id="toc-geography" class="nav-link" data-scroll-target="#geography">Geography</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#mapping-the-data" id="toc-mapping-the-data" class="nav-link" data-scroll-target="#mapping-the-data">Mapping the Data</a>
  <ul class="collapse">
  <li><a href="#school-age-children" id="toc-school-age-children" class="nav-link" data-scroll-target="#school-age-children">School Age Children</a>
  <ul class="collapse">
  <li><a href="#louisville-jefferson-county-with-labels" id="toc-louisville-jefferson-county-with-labels" class="nav-link" data-scroll-target="#louisville-jefferson-county-with-labels">Louisville (Jefferson County) with Labels</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#conclusion-and-next-steps" id="toc-conclusion-and-next-steps" class="nav-link" data-scroll-target="#conclusion-and-next-steps">Conclusion and next steps</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">How to Use Census Microdata to Analyze High Speed Internet in Kentucky</h1>
  <div class="quarto-categories">
    <div class="quarto-category">R</div>
    <div class="quarto-category">Census</div>
    <div class="quarto-category">Internet</div>
    <div class="quarto-category">Policy</div>
  </div>
  </div>

<div>
  <div class="description">
    This post is a start to finish descriptive analysis of high speed internet access in Kentucky, including tables, graphs, and maps. All of the detail of cleaning the data and iterating while exploring the data is included. This makes for a rather lengthy post, but it also makes it relatively unique in including all of those steps. We go through five attempts at making a table of high speed internet before finally getting it right! There’s quite a bit of cleaning work and then also a detour into calculating standard errors via bootstrap so we can correctly display uncertainty in our visuals.
  </div>
</div>


<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 13, 2020</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>This post is a start to finish descriptive analysis of high speed internet access in Kentucky, including tables, graphs, and maps. All of the detail of cleaning the data and iterating while exploring the data is included. This makes for a rather lengthy post, but it also makes it relatively unique in including all of those steps. We go through five attempts at making a table of high speed internet before finally getting it right! There’s quite a bit of cleaning work and then also a detour into calculating standard errors via bootstrap so we can correctly display uncertainty in our visuals.</p>
<p>Census microdata is individual level data provided by the census. Most references to census data refer to tables the census bureau has already made out of their surveys, but the mostly raw survey data is available at the individual level, and that’s what we’ll use for this analysis. While the focus is on the census data, I do show the code used for analysis. I did decide to hide the code used to make all the tables (it gets rather lengthy), but you can see that code <a href="https://github.com/natekratzer/personal_site/blob/master/content/post/internet_census_microdata/index.Rmd">on Github</a> if interested.</p>
</section>
<section id="getting-the-data" class="level1">
<h1>Getting the Data</h1>
<p>The easiest way to get census microdata is through the Integrated Public Use Microdata Series (IPUMS) hosted by the University of Minnesota. While you can get the data directly from the Census Bureau, IPUMS has made it much easier to compare across multiple years and to select the variables you want. IPUMS also provides a codebook that is easy to refer to and notes any important changes from year to year.</p>
<p>I’ve put the data for just Kentucky up on GitHub, so I’ll read it in from there.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co">#data manipulation</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt) <span class="co">#formatting tables for display</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survey) <span class="co">#survey data</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rgdal) <span class="co">#shapefiles for maps</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf) <span class="co">#maps</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"https://raw.github.com/natekratzer/raw_data/master/ky_high_speed_internet.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="cleaning-the-data" class="level1">
<h1>Cleaning the Data</h1>
<p>When downloading the data it’s all numeric, even for variables that are categorial - they’ve been coded and our first step in the analysis will be using the code book to translate them. I won’t show all the codebooks, but for this first variable let’s take a look at what IPUMS has to say. For all years NA is coded as 00 and No high speed internet is coded as 20. Prior to 2016 there are detailed codes for the type of internet access, while for 2016 and after the code is collapsed.</p>
<p><img src="high_speed_code.png" class="img-fluid"></p>
<p>I’ll use a <code>case_when()</code> statement to recode high speed interent access into a categorical variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># High Speed Internet</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">hspd_int =</span> <span class="fu">case_when</span>(</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>      CIHISPEED <span class="sc">==</span> <span class="dv">00</span> <span class="sc">~</span> <span class="cn">NA_character_</span>,</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>      CIHISPEED <span class="sc">==</span> <span class="dv">20</span> <span class="sc">~</span> <span class="st">"No"</span>,</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>      CIHISPEED <span class="sc">&gt;=</span> <span class="dv">10</span> <span class="sc">&amp;</span> CIHISPEED <span class="sc">&lt;</span> <span class="dv">20</span> <span class="sc">~</span> <span class="st">"Yes"</span>,</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="getting-wrong-answers-by-not-knowing-the-data" class="level2">
<h2 class="anchored" data-anchor-id="getting-wrong-answers-by-not-knowing-the-data">Getting wrong answers by not knowing the data</h2>
<p>Now that we have a high speed internet category we can group the data and count up how many responses are in each group. I’ll also pivot the dataframe to make it easy to calculate percent with high speed internet.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Count numbers with and without high speed internet</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>df_group <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(hspd_int, YEAR) <span class="sc">%&gt;%</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">count =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Pivot for easier percent calculations</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>df_wide <span class="ot">&lt;-</span> df_group  <span class="sc">%&gt;%</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> YEAR,</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">names_from =</span> hspd_int,</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> count) <span class="sc">%&gt;%</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent_hspd =</span> (Yes <span class="sc">/</span> (Yes <span class="sc">+</span> No)),</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent_no =</span> <span class="dv">1</span> <span class="sc">-</span> percent_hspd,</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent_NA =</span> (<span class="st">`</span><span class="at">NA</span><span class="st">`</span> <span class="sc">/</span> (Yes <span class="sc">+</span> No <span class="sc">+</span> <span class="st">`</span><span class="at">NA</span><span class="st">`</span>))</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>  ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div id="ovpuxxmeoj" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#ovpuxxmeoj) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 12px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 50%;
  border-top-style: solid;
  border-top-width: 3px;
  border-top-color: #D3D3D3;
  border-right-style: solid;
  border-right-width: 3px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 3px;
  border-bottom-color: #D3D3D3;
  border-left-style: solid;
  border-left-width: 3px;
  border-left-color: #D3D3D3;
}

:where(#ovpuxxmeoj) .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#ovpuxxmeoj) .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

:where(#ovpuxxmeoj) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#ovpuxxmeoj) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#ovpuxxmeoj) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#ovpuxxmeoj) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#ovpuxxmeoj) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#ovpuxxmeoj) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#ovpuxxmeoj) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#ovpuxxmeoj) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#ovpuxxmeoj) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#ovpuxxmeoj) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

:where(#ovpuxxmeoj) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#ovpuxxmeoj) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#ovpuxxmeoj) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#ovpuxxmeoj) .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#ovpuxxmeoj) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ovpuxxmeoj) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#ovpuxxmeoj) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#ovpuxxmeoj) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ovpuxxmeoj) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#ovpuxxmeoj) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#ovpuxxmeoj) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#ovpuxxmeoj) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ovpuxxmeoj) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#ovpuxxmeoj) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#ovpuxxmeoj) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#ovpuxxmeoj) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#ovpuxxmeoj) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ovpuxxmeoj) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#ovpuxxmeoj) .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ovpuxxmeoj) .gt_left {
  text-align: left;
}

:where(#ovpuxxmeoj) .gt_center {
  text-align: center;
}

:where(#ovpuxxmeoj) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#ovpuxxmeoj) .gt_font_normal {
  font-weight: normal;
}

:where(#ovpuxxmeoj) .gt_font_bold {
  font-weight: bold;
}

:where(#ovpuxxmeoj) .gt_font_italic {
  font-style: italic;
}

:where(#ovpuxxmeoj) .gt_super {
  font-size: 65%;
}

:where(#ovpuxxmeoj) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#ovpuxxmeoj) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#ovpuxxmeoj) .gt_indent_1 {
  text-indent: 5px;
}

:where(#ovpuxxmeoj) .gt_indent_2 {
  text-indent: 10px;
}

:where(#ovpuxxmeoj) .gt_indent_3 {
  text-indent: 15px;
}

:where(#ovpuxxmeoj) .gt_indent_4 {
  text-indent: 20px;
}

:where(#ovpuxxmeoj) .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  <thead class="gt_header">
    <tr>
      <td colspan="7" class="gt_heading gt_title gt_font_normal" style="">Table 1: Quick Analysis</td>
    </tr>
    <tr>
      <td colspan="7" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style="">These results are wrong!</td>
    </tr>
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="2" colspan="1" scope="col" id="Year">Year</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="3" scope="colgroup" id="Percent">
        <span class="gt_column_spanner">Percent</span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="3" scope="colgroup" id="Number of People">
        <span class="gt_column_spanner">Number of People</span>
      </th>
    </tr>
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Yes">Yes</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="No">No</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="NA">NA</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Yes">Yes</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="No">No</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="NA">NA</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="YEAR" class="gt_row gt_center">2013</td>
<td headers="percent_hspd" class="gt_row gt_center">87%</td>
<td headers="percent_no" class="gt_row gt_center">13%</td>
<td headers="percent_NA" class="gt_row gt_center">28%</td>
<td headers="Yes" class="gt_row gt_center">28.3K</td>
<td headers="No" class="gt_row gt_center">4.27K</td>
<td headers="NA" class="gt_row gt_center">12.4K</td></tr>
    <tr><td headers="YEAR" class="gt_row gt_center gt_striped">2014</td>
<td headers="percent_hspd" class="gt_row gt_center gt_striped">86%</td>
<td headers="percent_no" class="gt_row gt_center gt_striped">14%</td>
<td headers="percent_NA" class="gt_row gt_center gt_striped">27%</td>
<td headers="Yes" class="gt_row gt_center gt_striped">28.1K</td>
<td headers="No" class="gt_row gt_center gt_striped">4.70K</td>
<td headers="NA" class="gt_row gt_center gt_striped">12.1K</td></tr>
    <tr><td headers="YEAR" class="gt_row gt_center">2015</td>
<td headers="percent_hspd" class="gt_row gt_center">86%</td>
<td headers="percent_no" class="gt_row gt_center">14%</td>
<td headers="percent_NA" class="gt_row gt_center">26%</td>
<td headers="Yes" class="gt_row gt_center">28.7K</td>
<td headers="No" class="gt_row gt_center">4.52K</td>
<td headers="NA" class="gt_row gt_center">11.5K</td></tr>
    <tr><td headers="YEAR" class="gt_row gt_center gt_striped">2016</td>
<td headers="percent_hspd" class="gt_row gt_center gt_striped">82%</td>
<td headers="percent_no" class="gt_row gt_center gt_striped">18%</td>
<td headers="percent_NA" class="gt_row gt_center gt_striped">20%</td>
<td headers="Yes" class="gt_row gt_center gt_striped">29.2K</td>
<td headers="No" class="gt_row gt_center gt_striped">6.49K</td>
<td headers="NA" class="gt_row gt_center gt_striped">9.02K</td></tr>
    <tr><td headers="YEAR" class="gt_row gt_center">2017</td>
<td headers="percent_hspd" class="gt_row gt_center">81%</td>
<td headers="percent_no" class="gt_row gt_center">19%</td>
<td headers="percent_NA" class="gt_row gt_center">19%</td>
<td headers="Yes" class="gt_row gt_center">29.4K</td>
<td headers="No" class="gt_row gt_center">7.08K</td>
<td headers="NA" class="gt_row gt_center">8.77K</td></tr>
    <tr><td headers="YEAR" class="gt_row gt_center gt_striped">2018</td>
<td headers="percent_hspd" class="gt_row gt_center gt_striped">80%</td>
<td headers="percent_no" class="gt_row gt_center gt_striped">20%</td>
<td headers="percent_NA" class="gt_row gt_center gt_striped">17%</td>
<td headers="Yes" class="gt_row gt_center gt_striped">30.3K</td>
<td headers="No" class="gt_row gt_center gt_striped">7.35K</td>
<td headers="NA" class="gt_row gt_center gt_striped">7.86K</td></tr>
  </tbody>
  <tfoot class="gt_sourcenotes">
    <tr>
      <td class="gt_sourcenote" colspan="7">Yes and No percentages are calculated out of those who answered to represent the results an analyst might get if they ignored NA values. NA is calculated separately based on all the data.</td>
    </tr>
    <tr>
      <td class="gt_sourcenote" colspan="7">Source: Author's incorrect analysis of IPUMS data. Used as an example of a mistake to avoid.</td>
    </tr>
  </tfoot>
  
</table>
</div>
</div>
</div>
<p>This table is actually wrong for multiple reasons, but the first one we’ll take care of is the failure to use weights. Survey data is often weighted to make it representative of the population. The census bureau provides a <code>PERWT</code> variable that should be used as the weight for each person in the file. There’s also a <code>HHWT</code> variable for household level analysis. We’ll stick with weighting the data by the number of people. One of the really nice features of the <code>PERWT</code> variable is that it sums to the population. That means our tables can show both an overall number of people and the percentage of people.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Count numbers with and without high speed internet</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>df_group <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(hspd_int, YEAR) <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">count =</span> <span class="fu">sum</span>(PERWT), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Pivot for easier percent calculations</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>df_wide <span class="ot">&lt;-</span> df_group  <span class="sc">%&gt;%</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> YEAR,</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">names_from =</span> hspd_int,</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> count) <span class="sc">%&gt;%</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent_hspd =</span> (Yes <span class="sc">/</span> (Yes <span class="sc">+</span> No)),</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent_no =</span> <span class="dv">1</span> <span class="sc">-</span> percent_hspd,</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent_NA =</span> (<span class="st">`</span><span class="at">NA</span><span class="st">`</span> <span class="sc">/</span> (Yes <span class="sc">+</span> No <span class="sc">+</span> <span class="st">`</span><span class="at">NA</span><span class="st">`</span>))</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div id="gaddlmfvkd" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#gaddlmfvkd) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 12px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 50%;
  border-top-style: solid;
  border-top-width: 3px;
  border-top-color: #D3D3D3;
  border-right-style: solid;
  border-right-width: 3px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 3px;
  border-bottom-color: #D3D3D3;
  border-left-style: solid;
  border-left-width: 3px;
  border-left-color: #D3D3D3;
}

:where(#gaddlmfvkd) .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#gaddlmfvkd) .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

:where(#gaddlmfvkd) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#gaddlmfvkd) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#gaddlmfvkd) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#gaddlmfvkd) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#gaddlmfvkd) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#gaddlmfvkd) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#gaddlmfvkd) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#gaddlmfvkd) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#gaddlmfvkd) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#gaddlmfvkd) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

:where(#gaddlmfvkd) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#gaddlmfvkd) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#gaddlmfvkd) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#gaddlmfvkd) .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#gaddlmfvkd) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#gaddlmfvkd) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#gaddlmfvkd) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#gaddlmfvkd) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#gaddlmfvkd) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#gaddlmfvkd) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#gaddlmfvkd) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#gaddlmfvkd) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#gaddlmfvkd) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#gaddlmfvkd) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#gaddlmfvkd) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#gaddlmfvkd) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#gaddlmfvkd) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#gaddlmfvkd) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#gaddlmfvkd) .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#gaddlmfvkd) .gt_left {
  text-align: left;
}

:where(#gaddlmfvkd) .gt_center {
  text-align: center;
}

:where(#gaddlmfvkd) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#gaddlmfvkd) .gt_font_normal {
  font-weight: normal;
}

:where(#gaddlmfvkd) .gt_font_bold {
  font-weight: bold;
}

:where(#gaddlmfvkd) .gt_font_italic {
  font-style: italic;
}

:where(#gaddlmfvkd) .gt_super {
  font-size: 65%;
}

:where(#gaddlmfvkd) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#gaddlmfvkd) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#gaddlmfvkd) .gt_indent_1 {
  text-indent: 5px;
}

:where(#gaddlmfvkd) .gt_indent_2 {
  text-indent: 10px;
}

:where(#gaddlmfvkd) .gt_indent_3 {
  text-indent: 15px;
}

:where(#gaddlmfvkd) .gt_indent_4 {
  text-indent: 20px;
}

:where(#gaddlmfvkd) .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  <thead class="gt_header">
    <tr>
      <td colspan="7" class="gt_heading gt_title gt_font_normal" style="">Table 2: Quick Analysis with Weights</td>
    </tr>
    <tr>
      <td colspan="7" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style="">These results are still wrong!</td>
    </tr>
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="2" colspan="1" scope="col" id="Year">Year</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="3" scope="colgroup" id="Percent">
        <span class="gt_column_spanner">Percent</span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="3" scope="colgroup" id="Number of People">
        <span class="gt_column_spanner">Number of People</span>
      </th>
    </tr>
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Yes">Yes</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="No">No</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="NA">NA</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Yes">Yes</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="No">No</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="NA">NA</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="YEAR" class="gt_row gt_center">2013</td>
<td headers="percent_hspd" class="gt_row gt_center">86%</td>
<td headers="percent_no" class="gt_row gt_center">14%</td>
<td headers="percent_NA" class="gt_row gt_center">27%</td>
<td headers="Yes" class="gt_row gt_center">2.76M</td>
<td headers="No" class="gt_row gt_center">454K</td>
<td headers="NA" class="gt_row gt_center">1.18M</td></tr>
    <tr><td headers="YEAR" class="gt_row gt_center gt_striped">2014</td>
<td headers="percent_hspd" class="gt_row gt_center gt_striped">84%</td>
<td headers="percent_no" class="gt_row gt_center gt_striped">16%</td>
<td headers="percent_NA" class="gt_row gt_center gt_striped">26%</td>
<td headers="Yes" class="gt_row gt_center gt_striped">2.74M</td>
<td headers="No" class="gt_row gt_center gt_striped">509K</td>
<td headers="NA" class="gt_row gt_center gt_striped">1.17M</td></tr>
    <tr><td headers="YEAR" class="gt_row gt_center">2015</td>
<td headers="percent_hspd" class="gt_row gt_center">86%</td>
<td headers="percent_no" class="gt_row gt_center">14%</td>
<td headers="percent_NA" class="gt_row gt_center">25%</td>
<td headers="Yes" class="gt_row gt_center">2.85M</td>
<td headers="No" class="gt_row gt_center">479K</td>
<td headers="NA" class="gt_row gt_center">1.10M</td></tr>
    <tr><td headers="YEAR" class="gt_row gt_center gt_striped">2016</td>
<td headers="percent_hspd" class="gt_row gt_center gt_striped">80%</td>
<td headers="percent_no" class="gt_row gt_center gt_striped">20%</td>
<td headers="percent_NA" class="gt_row gt_center gt_striped">19%</td>
<td headers="Yes" class="gt_row gt_center gt_striped">2.87M</td>
<td headers="No" class="gt_row gt_center gt_striped">708K</td>
<td headers="NA" class="gt_row gt_center gt_striped">855K</td></tr>
    <tr><td headers="YEAR" class="gt_row gt_center">2017</td>
<td headers="percent_hspd" class="gt_row gt_center">80%</td>
<td headers="percent_no" class="gt_row gt_center">20%</td>
<td headers="percent_NA" class="gt_row gt_center">18%</td>
<td headers="Yes" class="gt_row gt_center">2.90M</td>
<td headers="No" class="gt_row gt_center">735K</td>
<td headers="NA" class="gt_row gt_center">817K</td></tr>
    <tr><td headers="YEAR" class="gt_row gt_center gt_striped">2018</td>
<td headers="percent_hspd" class="gt_row gt_center gt_striped">79%</td>
<td headers="percent_no" class="gt_row gt_center gt_striped">21%</td>
<td headers="percent_NA" class="gt_row gt_center gt_striped">16%</td>
<td headers="Yes" class="gt_row gt_center gt_striped">2.97M</td>
<td headers="No" class="gt_row gt_center gt_striped">790K</td>
<td headers="NA" class="gt_row gt_center gt_striped">709K</td></tr>
  </tbody>
  <tfoot class="gt_sourcenotes">
    <tr>
      <td class="gt_sourcenote" colspan="7">Yes and No percentages are calculated out of those who answered to represent the results an analyst might get if they ignored NA values. NA is calculated separately based on all the data.</td>
    </tr>
    <tr>
      <td class="gt_sourcenote" colspan="7">Source: Author's incorrect analysis of IPUMS data. Used as an example of a mistake to avoid.</td>
    </tr>
  </tfoot>
  
</table>
</div>
</div>
</div>
<p>This is better. The second problem is harder to spot. There are 3 hints in the data:</p>
<ol type="1">
<li>There is a very high percentage of NA responses. There are more NA answers than there are people who say they don’t have high speed access.</li>
<li>Percent of of people with high speed access is going down over time, which isn’t what I’d expect to see. That doesn’t mean it’s wrong - sometimes the data shows high level trends we don’t expect. However, it’s always worth a second look when you get a counterintuitive result.</li>
<li>These numbers look very high for Kentucky.</li>
</ol>
<p>A sensible guess is that people who say they don’t have internet access at all aren’t then asked about high speed internet and show up as an NA value when we want to code them as not having high speed interent.</p>
<p>So let’s get to know the data a bit better by adding in internet access. We’ll do the same analysis, but I’ll add internet as another id variable just like year. We can see right away that the answers we have above are only including cases where individuals have internet.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">int =</span> <span class="fu">case_when</span>(</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>      CINETHH <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="cn">NA_character_</span>,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>      CINETHH <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> CINETHH <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">"Yes"</span>,</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>      CINETHH <span class="sc">==</span> <span class="dv">3</span> <span class="sc">~</span> <span class="st">"No"</span>,</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>df_group <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(hspd_int, int, YEAR) <span class="sc">%&gt;%</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">count =</span> <span class="fu">sum</span>(PERWT), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Pivot for easier percent calculations</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>df_wide <span class="ot">&lt;-</span> df_group  <span class="sc">%&gt;%</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">id_cols =</span> <span class="fu">c</span>(YEAR, int),</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from =</span> hspd_int,</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> count</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent_hspd =</span> (Yes <span class="sc">/</span> (Yes <span class="sc">+</span> No)),</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent_no =</span> <span class="dv">1</span> <span class="sc">-</span> percent_hspd,</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent_NA =</span> (<span class="st">`</span><span class="at">NA</span><span class="st">`</span> <span class="sc">/</span> (Yes <span class="sc">+</span> No <span class="sc">+</span> <span class="st">`</span><span class="at">NA</span><span class="st">`</span>))</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div id="rjmyldxaxp" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#rjmyldxaxp) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 12px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 50%;
  border-top-style: solid;
  border-top-width: 3px;
  border-top-color: #D3D3D3;
  border-right-style: solid;
  border-right-width: 3px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 3px;
  border-bottom-color: #D3D3D3;
  border-left-style: solid;
  border-left-width: 3px;
  border-left-color: #D3D3D3;
}

:where(#rjmyldxaxp) .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#rjmyldxaxp) .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

:where(#rjmyldxaxp) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#rjmyldxaxp) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#rjmyldxaxp) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#rjmyldxaxp) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#rjmyldxaxp) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#rjmyldxaxp) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#rjmyldxaxp) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#rjmyldxaxp) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#rjmyldxaxp) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#rjmyldxaxp) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

:where(#rjmyldxaxp) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#rjmyldxaxp) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#rjmyldxaxp) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#rjmyldxaxp) .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#rjmyldxaxp) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#rjmyldxaxp) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#rjmyldxaxp) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#rjmyldxaxp) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#rjmyldxaxp) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#rjmyldxaxp) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#rjmyldxaxp) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#rjmyldxaxp) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#rjmyldxaxp) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#rjmyldxaxp) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#rjmyldxaxp) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#rjmyldxaxp) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#rjmyldxaxp) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#rjmyldxaxp) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#rjmyldxaxp) .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#rjmyldxaxp) .gt_left {
  text-align: left;
}

:where(#rjmyldxaxp) .gt_center {
  text-align: center;
}

:where(#rjmyldxaxp) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#rjmyldxaxp) .gt_font_normal {
  font-weight: normal;
}

:where(#rjmyldxaxp) .gt_font_bold {
  font-weight: bold;
}

:where(#rjmyldxaxp) .gt_font_italic {
  font-style: italic;
}

:where(#rjmyldxaxp) .gt_super {
  font-size: 65%;
}

:where(#rjmyldxaxp) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#rjmyldxaxp) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#rjmyldxaxp) .gt_indent_1 {
  text-indent: 5px;
}

:where(#rjmyldxaxp) .gt_indent_2 {
  text-indent: 10px;
}

:where(#rjmyldxaxp) .gt_indent_3 {
  text-indent: 15px;
}

:where(#rjmyldxaxp) .gt_indent_4 {
  text-indent: 20px;
}

:where(#rjmyldxaxp) .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  <thead class="gt_header">
    <tr>
      <td colspan="7" class="gt_heading gt_title gt_font_normal" style="">Table 3: Exploring Internet Data</td>
    </tr>
    <tr>
      <td colspan="7" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style="">These results are exploratory. But not wrong!</td>
    </tr>
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="2" colspan="1" scope="col" id="Year">Year</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="3" scope="colgroup" id="Percent">
        <span class="gt_column_spanner">Percent</span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="3" scope="colgroup" id="Number of People">
        <span class="gt_column_spanner">Number of People</span>
      </th>
    </tr>
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Yes">Yes</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="No">No</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="NA">NA</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Yes">Yes</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="No">No</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="NA">NA</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr class="gt_group_heading_row">
      <th colspan="7" class="gt_group_heading" scope="colgroup" id="Has Internet Access">Has Internet Access</th>
    </tr>
    <tr class="gt_row_group_first"><td headers="Has Internet Access  YEAR" class="gt_row gt_center">2013</td>
<td headers="Has Internet Access  percent_hspd" class="gt_row gt_center">86%</td>
<td headers="Has Internet Access  percent_no" class="gt_row gt_center">14%</td>
<td headers="Has Internet Access  percent_NA" class="gt_row gt_center">5%</td>
<td headers="Has Internet Access  Yes" class="gt_row gt_center">2.76M</td>
<td headers="Has Internet Access  No" class="gt_row gt_center">454K</td>
<td headers="Has Internet Access  NA" class="gt_row gt_center">185K</td></tr>
    <tr><td headers="Has Internet Access  YEAR" class="gt_row gt_center gt_striped">2014</td>
<td headers="Has Internet Access  percent_hspd" class="gt_row gt_center gt_striped">84%</td>
<td headers="Has Internet Access  percent_no" class="gt_row gt_center gt_striped">16%</td>
<td headers="Has Internet Access  percent_NA" class="gt_row gt_center gt_striped">6%</td>
<td headers="Has Internet Access  Yes" class="gt_row gt_center gt_striped">2.74M</td>
<td headers="Has Internet Access  No" class="gt_row gt_center gt_striped">509K</td>
<td headers="Has Internet Access  NA" class="gt_row gt_center gt_striped">193K</td></tr>
    <tr><td headers="Has Internet Access  YEAR" class="gt_row gt_center">2015</td>
<td headers="Has Internet Access  percent_hspd" class="gt_row gt_center">86%</td>
<td headers="Has Internet Access  percent_no" class="gt_row gt_center">14%</td>
<td headers="Has Internet Access  percent_NA" class="gt_row gt_center">6%</td>
<td headers="Has Internet Access  Yes" class="gt_row gt_center">2.85M</td>
<td headers="Has Internet Access  No" class="gt_row gt_center">479K</td>
<td headers="Has Internet Access  NA" class="gt_row gt_center">217K</td></tr>
    <tr><td headers="Has Internet Access  YEAR" class="gt_row gt_center gt_striped">2016</td>
<td headers="Has Internet Access  percent_hspd" class="gt_row gt_center gt_striped">80%</td>
<td headers="Has Internet Access  percent_no" class="gt_row gt_center gt_striped">20%</td>
<td headers="Has Internet Access  percent_NA" class="gt_row gt_center gt_striped">3%</td>
<td headers="Has Internet Access  Yes" class="gt_row gt_center gt_striped">2.87M</td>
<td headers="Has Internet Access  No" class="gt_row gt_center gt_striped">708K</td>
<td headers="Has Internet Access  NA" class="gt_row gt_center gt_striped">129K</td></tr>
    <tr><td headers="Has Internet Access  YEAR" class="gt_row gt_center">2017</td>
<td headers="Has Internet Access  percent_hspd" class="gt_row gt_center">80%</td>
<td headers="Has Internet Access  percent_no" class="gt_row gt_center">20%</td>
<td headers="Has Internet Access  percent_NA" class="gt_row gt_center">3%</td>
<td headers="Has Internet Access  Yes" class="gt_row gt_center">2.90M</td>
<td headers="Has Internet Access  No" class="gt_row gt_center">735K</td>
<td headers="Has Internet Access  NA" class="gt_row gt_center">124K</td></tr>
    <tr><td headers="Has Internet Access  YEAR" class="gt_row gt_center gt_striped">2018</td>
<td headers="Has Internet Access  percent_hspd" class="gt_row gt_center gt_striped">79%</td>
<td headers="Has Internet Access  percent_no" class="gt_row gt_center gt_striped">21%</td>
<td headers="Has Internet Access  percent_NA" class="gt_row gt_center gt_striped">3%</td>
<td headers="Has Internet Access  Yes" class="gt_row gt_center gt_striped">2.97M</td>
<td headers="Has Internet Access  No" class="gt_row gt_center gt_striped">790K</td>
<td headers="Has Internet Access  NA" class="gt_row gt_center gt_striped">125K</td></tr>
    <tr class="gt_group_heading_row">
      <th colspan="7" class="gt_group_heading" scope="colgroup" id="No Internet Access">No Internet Access</th>
    </tr>
    <tr class="gt_row_group_first"><td headers="No Internet Access  YEAR" class="gt_row gt_center">2013</td>
<td headers="No Internet Access  percent_hspd" class="gt_row gt_center">NA</td>
<td headers="No Internet Access  percent_no" class="gt_row gt_center">NA</td>
<td headers="No Internet Access  percent_NA" class="gt_row gt_center">NA</td>
<td headers="No Internet Access  Yes" class="gt_row gt_center">NA</td>
<td headers="No Internet Access  No" class="gt_row gt_center">NA</td>
<td headers="No Internet Access  NA" class="gt_row gt_center">866K</td></tr>
    <tr><td headers="No Internet Access  YEAR" class="gt_row gt_center gt_striped">2014</td>
<td headers="No Internet Access  percent_hspd" class="gt_row gt_center gt_striped">NA</td>
<td headers="No Internet Access  percent_no" class="gt_row gt_center gt_striped">NA</td>
<td headers="No Internet Access  percent_NA" class="gt_row gt_center gt_striped">NA</td>
<td headers="No Internet Access  Yes" class="gt_row gt_center gt_striped">NA</td>
<td headers="No Internet Access  No" class="gt_row gt_center gt_striped">NA</td>
<td headers="No Internet Access  NA" class="gt_row gt_center gt_striped">842K</td></tr>
    <tr><td headers="No Internet Access  YEAR" class="gt_row gt_center">2015</td>
<td headers="No Internet Access  percent_hspd" class="gt_row gt_center">NA</td>
<td headers="No Internet Access  percent_no" class="gt_row gt_center">NA</td>
<td headers="No Internet Access  percent_NA" class="gt_row gt_center">NA</td>
<td headers="No Internet Access  Yes" class="gt_row gt_center">NA</td>
<td headers="No Internet Access  No" class="gt_row gt_center">NA</td>
<td headers="No Internet Access  NA" class="gt_row gt_center">753K</td></tr>
    <tr><td headers="No Internet Access  YEAR" class="gt_row gt_center gt_striped">2016</td>
<td headers="No Internet Access  percent_hspd" class="gt_row gt_center gt_striped">NA</td>
<td headers="No Internet Access  percent_no" class="gt_row gt_center gt_striped">NA</td>
<td headers="No Internet Access  percent_NA" class="gt_row gt_center gt_striped">NA</td>
<td headers="No Internet Access  Yes" class="gt_row gt_center gt_striped">NA</td>
<td headers="No Internet Access  No" class="gt_row gt_center gt_striped">NA</td>
<td headers="No Internet Access  NA" class="gt_row gt_center gt_striped">596K</td></tr>
    <tr><td headers="No Internet Access  YEAR" class="gt_row gt_center">2017</td>
<td headers="No Internet Access  percent_hspd" class="gt_row gt_center">NA</td>
<td headers="No Internet Access  percent_no" class="gt_row gt_center">NA</td>
<td headers="No Internet Access  percent_NA" class="gt_row gt_center">NA</td>
<td headers="No Internet Access  Yes" class="gt_row gt_center">NA</td>
<td headers="No Internet Access  No" class="gt_row gt_center">NA</td>
<td headers="No Internet Access  NA" class="gt_row gt_center">560K</td></tr>
    <tr><td headers="No Internet Access  YEAR" class="gt_row gt_center gt_striped">2018</td>
<td headers="No Internet Access  percent_hspd" class="gt_row gt_center gt_striped">NA</td>
<td headers="No Internet Access  percent_no" class="gt_row gt_center gt_striped">NA</td>
<td headers="No Internet Access  percent_NA" class="gt_row gt_center gt_striped">NA</td>
<td headers="No Internet Access  Yes" class="gt_row gt_center gt_striped">NA</td>
<td headers="No Internet Access  No" class="gt_row gt_center gt_striped">NA</td>
<td headers="No Internet Access  NA" class="gt_row gt_center gt_striped">452K</td></tr>
    <tr class="gt_group_heading_row">
      <th colspan="7" class="gt_group_heading" scope="colgroup" id="Internet Access is NA">Internet Access is NA</th>
    </tr>
    <tr class="gt_row_group_first"><td headers="Internet Access is NA  YEAR" class="gt_row gt_center">2013</td>
<td headers="Internet Access is NA  percent_hspd" class="gt_row gt_center">NA</td>
<td headers="Internet Access is NA  percent_no" class="gt_row gt_center">NA</td>
<td headers="Internet Access is NA  percent_NA" class="gt_row gt_center">NA</td>
<td headers="Internet Access is NA  Yes" class="gt_row gt_center">NA</td>
<td headers="Internet Access is NA  No" class="gt_row gt_center">NA</td>
<td headers="Internet Access is NA  NA" class="gt_row gt_center">126K</td></tr>
    <tr><td headers="Internet Access is NA  YEAR" class="gt_row gt_center gt_striped">2014</td>
<td headers="Internet Access is NA  percent_hspd" class="gt_row gt_center gt_striped">NA</td>
<td headers="Internet Access is NA  percent_no" class="gt_row gt_center gt_striped">NA</td>
<td headers="Internet Access is NA  percent_NA" class="gt_row gt_center gt_striped">NA</td>
<td headers="Internet Access is NA  Yes" class="gt_row gt_center gt_striped">NA</td>
<td headers="Internet Access is NA  No" class="gt_row gt_center gt_striped">NA</td>
<td headers="Internet Access is NA  NA" class="gt_row gt_center gt_striped">130K</td></tr>
    <tr><td headers="Internet Access is NA  YEAR" class="gt_row gt_center">2015</td>
<td headers="Internet Access is NA  percent_hspd" class="gt_row gt_center">NA</td>
<td headers="Internet Access is NA  percent_no" class="gt_row gt_center">NA</td>
<td headers="Internet Access is NA  percent_NA" class="gt_row gt_center">NA</td>
<td headers="Internet Access is NA  Yes" class="gt_row gt_center">NA</td>
<td headers="Internet Access is NA  No" class="gt_row gt_center">NA</td>
<td headers="Internet Access is NA  NA" class="gt_row gt_center">129K</td></tr>
    <tr><td headers="Internet Access is NA  YEAR" class="gt_row gt_center gt_striped">2016</td>
<td headers="Internet Access is NA  percent_hspd" class="gt_row gt_center gt_striped">NA</td>
<td headers="Internet Access is NA  percent_no" class="gt_row gt_center gt_striped">NA</td>
<td headers="Internet Access is NA  percent_NA" class="gt_row gt_center gt_striped">NA</td>
<td headers="Internet Access is NA  Yes" class="gt_row gt_center gt_striped">NA</td>
<td headers="Internet Access is NA  No" class="gt_row gt_center gt_striped">NA</td>
<td headers="Internet Access is NA  NA" class="gt_row gt_center gt_striped">131K</td></tr>
    <tr><td headers="Internet Access is NA  YEAR" class="gt_row gt_center">2017</td>
<td headers="Internet Access is NA  percent_hspd" class="gt_row gt_center">NA</td>
<td headers="Internet Access is NA  percent_no" class="gt_row gt_center">NA</td>
<td headers="Internet Access is NA  percent_NA" class="gt_row gt_center">NA</td>
<td headers="Internet Access is NA  Yes" class="gt_row gt_center">NA</td>
<td headers="Internet Access is NA  No" class="gt_row gt_center">NA</td>
<td headers="Internet Access is NA  NA" class="gt_row gt_center">132K</td></tr>
    <tr><td headers="Internet Access is NA  YEAR" class="gt_row gt_center gt_striped">2018</td>
<td headers="Internet Access is NA  percent_hspd" class="gt_row gt_center gt_striped">NA</td>
<td headers="Internet Access is NA  percent_no" class="gt_row gt_center gt_striped">NA</td>
<td headers="Internet Access is NA  percent_NA" class="gt_row gt_center gt_striped">NA</td>
<td headers="Internet Access is NA  Yes" class="gt_row gt_center gt_striped">NA</td>
<td headers="Internet Access is NA  No" class="gt_row gt_center gt_striped">NA</td>
<td headers="Internet Access is NA  NA" class="gt_row gt_center gt_striped">132K</td></tr>
  </tbody>
  <tfoot class="gt_sourcenotes">
    <tr>
      <td class="gt_sourcenote" colspan="7">Yes and No percentages are calculated out of those who answered to represent the results an analyst might get if they ignored NA values. NA is calculated separately based on all the data.</td>
    </tr>
    <tr>
      <td class="gt_sourcenote" colspan="7">Source: Author's analysis of IPUMS data.</td>
    </tr>
  </tfoot>
  
</table>
</div>
</div>
</div>
<p>When we split it out this way we can see that the groups without any internet access are all NA values. So what we were looking at was the percentage of people with internet who have high speed internet. What we want is the percentage of all people who have high speed internet. We can fix the way we create our categories by saying that anyone who has no internet also has no high speed internet.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">#create a categorical variable for having any internet</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">int =</span> <span class="fu">case_when</span>(</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>      CINETHH <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="cn">NA_character_</span>,</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>      CINETHH <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> CINETHH <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">"Yes"</span>,</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>      CINETHH <span class="sc">==</span> <span class="dv">3</span> <span class="sc">~</span> <span class="st">"No"</span>,</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># change how high speed internet is defined so that houses w/o any interent are counted as 'No' instead of NA</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">hspd_int =</span> <span class="fu">case_when</span>(</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>      CIHISPEED <span class="sc">==</span> <span class="dv">00</span> <span class="sc">&amp;</span> int <span class="sc">!=</span> <span class="st">"No"</span> <span class="sc">~</span> <span class="cn">NA_character_</span>,</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>      CIHISPEED <span class="sc">==</span> <span class="dv">20</span> <span class="sc">|</span> int <span class="sc">==</span> <span class="st">"No"</span> <span class="sc">~</span> <span class="st">"No"</span>,</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>      CIHISPEED <span class="sc">&gt;=</span> <span class="dv">10</span> <span class="sc">&amp;</span> CIHISPEED <span class="sc">&lt;</span> <span class="dv">20</span> <span class="sc">~</span> <span class="st">"Yes"</span>,</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Count numbers with and without high speed internet</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>df_group <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(hspd_int, YEAR) <span class="sc">%&gt;%</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">count =</span> <span class="fu">sum</span>(PERWT), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Pivot for easier percent calculations</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>df_wide <span class="ot">&lt;-</span> df_group  <span class="sc">%&gt;%</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">id_cols =</span> <span class="fu">c</span>(YEAR),</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from =</span> hspd_int,</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> count</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent_hspd =</span> (Yes <span class="sc">/</span> (Yes <span class="sc">+</span> No)),</span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent_no =</span> <span class="dv">1</span> <span class="sc">-</span> percent_hspd,</span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent_NA =</span> (<span class="st">`</span><span class="at">NA</span><span class="st">`</span> <span class="sc">/</span> (Yes <span class="sc">+</span> No <span class="sc">+</span> <span class="st">`</span><span class="at">NA</span><span class="st">`</span>))</span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div id="igbzbqvdwu" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#igbzbqvdwu) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 12px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 50%;
  border-top-style: solid;
  border-top-width: 3px;
  border-top-color: #D3D3D3;
  border-right-style: solid;
  border-right-width: 3px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 3px;
  border-bottom-color: #D3D3D3;
  border-left-style: solid;
  border-left-width: 3px;
  border-left-color: #D3D3D3;
}

:where(#igbzbqvdwu) .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#igbzbqvdwu) .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

:where(#igbzbqvdwu) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#igbzbqvdwu) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#igbzbqvdwu) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#igbzbqvdwu) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#igbzbqvdwu) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#igbzbqvdwu) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#igbzbqvdwu) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#igbzbqvdwu) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#igbzbqvdwu) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#igbzbqvdwu) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

:where(#igbzbqvdwu) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#igbzbqvdwu) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#igbzbqvdwu) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#igbzbqvdwu) .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#igbzbqvdwu) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#igbzbqvdwu) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#igbzbqvdwu) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#igbzbqvdwu) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#igbzbqvdwu) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#igbzbqvdwu) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#igbzbqvdwu) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#igbzbqvdwu) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#igbzbqvdwu) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#igbzbqvdwu) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#igbzbqvdwu) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#igbzbqvdwu) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#igbzbqvdwu) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#igbzbqvdwu) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#igbzbqvdwu) .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#igbzbqvdwu) .gt_left {
  text-align: left;
}

:where(#igbzbqvdwu) .gt_center {
  text-align: center;
}

:where(#igbzbqvdwu) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#igbzbqvdwu) .gt_font_normal {
  font-weight: normal;
}

:where(#igbzbqvdwu) .gt_font_bold {
  font-weight: bold;
}

:where(#igbzbqvdwu) .gt_font_italic {
  font-style: italic;
}

:where(#igbzbqvdwu) .gt_super {
  font-size: 65%;
}

:where(#igbzbqvdwu) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#igbzbqvdwu) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#igbzbqvdwu) .gt_indent_1 {
  text-indent: 5px;
}

:where(#igbzbqvdwu) .gt_indent_2 {
  text-indent: 10px;
}

:where(#igbzbqvdwu) .gt_indent_3 {
  text-indent: 15px;
}

:where(#igbzbqvdwu) .gt_indent_4 {
  text-indent: 20px;
}

:where(#igbzbqvdwu) .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  <thead class="gt_header">
    <tr>
      <td colspan="7" class="gt_heading gt_title gt_font_normal" style="">Table 4: Almost right!</td>
    </tr>
    <tr>
      <td colspan="7" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style="">These results are still a little wrong!</td>
    </tr>
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="2" colspan="1" scope="col" id="Year">Year</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="3" scope="colgroup" id="Percent">
        <span class="gt_column_spanner">Percent</span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="3" scope="colgroup" id="Number of People">
        <span class="gt_column_spanner">Number of People</span>
      </th>
    </tr>
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Yes">Yes</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="No">No</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="NA">NA</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Yes">Yes</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="No">No</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="NA">NA</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="YEAR" class="gt_row gt_center">2013</td>
<td headers="percent_hspd" class="gt_row gt_center">68%</td>
<td headers="percent_no" class="gt_row gt_center">32%</td>
<td headers="percent_NA" class="gt_row gt_center">7%</td>
<td headers="Yes" class="gt_row gt_center">2.76M</td>
<td headers="No" class="gt_row gt_center">1.32M</td>
<td headers="NA" class="gt_row gt_center">311K</td></tr>
    <tr><td headers="YEAR" class="gt_row gt_center gt_striped">2014</td>
<td headers="percent_hspd" class="gt_row gt_center gt_striped">67%</td>
<td headers="percent_no" class="gt_row gt_center gt_striped">33%</td>
<td headers="percent_NA" class="gt_row gt_center gt_striped">7%</td>
<td headers="Yes" class="gt_row gt_center gt_striped">2.74M</td>
<td headers="No" class="gt_row gt_center gt_striped">1.35M</td>
<td headers="NA" class="gt_row gt_center gt_striped">324K</td></tr>
    <tr><td headers="YEAR" class="gt_row gt_center">2015</td>
<td headers="percent_hspd" class="gt_row gt_center">70%</td>
<td headers="percent_no" class="gt_row gt_center">30%</td>
<td headers="percent_NA" class="gt_row gt_center">8%</td>
<td headers="Yes" class="gt_row gt_center">2.85M</td>
<td headers="No" class="gt_row gt_center">1.23M</td>
<td headers="NA" class="gt_row gt_center">346K</td></tr>
    <tr><td headers="YEAR" class="gt_row gt_center gt_striped">2016</td>
<td headers="percent_hspd" class="gt_row gt_center gt_striped">69%</td>
<td headers="percent_no" class="gt_row gt_center gt_striped">31%</td>
<td headers="percent_NA" class="gt_row gt_center gt_striped">6%</td>
<td headers="Yes" class="gt_row gt_center gt_striped">2.87M</td>
<td headers="No" class="gt_row gt_center gt_striped">1.30M</td>
<td headers="NA" class="gt_row gt_center gt_striped">260K</td></tr>
    <tr><td headers="YEAR" class="gt_row gt_center">2017</td>
<td headers="percent_hspd" class="gt_row gt_center">69%</td>
<td headers="percent_no" class="gt_row gt_center">31%</td>
<td headers="percent_NA" class="gt_row gt_center">6%</td>
<td headers="Yes" class="gt_row gt_center">2.90M</td>
<td headers="No" class="gt_row gt_center">1.29M</td>
<td headers="NA" class="gt_row gt_center">256K</td></tr>
    <tr><td headers="YEAR" class="gt_row gt_center gt_striped">2018</td>
<td headers="percent_hspd" class="gt_row gt_center gt_striped">71%</td>
<td headers="percent_no" class="gt_row gt_center gt_striped">29%</td>
<td headers="percent_NA" class="gt_row gt_center gt_striped">6%</td>
<td headers="Yes" class="gt_row gt_center gt_striped">2.97M</td>
<td headers="No" class="gt_row gt_center gt_striped">1.24M</td>
<td headers="NA" class="gt_row gt_center gt_striped">257K</td></tr>
  </tbody>
  <tfoot class="gt_sourcenotes">
    <tr>
      <td class="gt_sourcenote" colspan="7">Yes and No percentages are calculated out of those who answered to represent the results an analyst might get if they ignored NA values. NA is calculated separately based on all the data.</td>
    </tr>
    <tr>
      <td class="gt_sourcenote" colspan="7">Source: Author's incorrect analysis of IPUMS data. Used as an example of a mistake to avoid.</td>
    </tr>
  </tfoot>
  
</table>
</div>
</div>
</div>
<p>These results look much better, although there’s still one more thing to do about those NA results.</p>
</section>
<section id="group-quarters-in-the-census" class="level2">
<h2 class="anchored" data-anchor-id="group-quarters-in-the-census">Group Quarters in the Census</h2>
<p>The census data includes individuals living in group quarters (mostly prisons, senior living centers, and dorms, but includes any sort of communal living arrangement). However, all census questions about appliances and utilities (the category that internet access falls under) are NA for group quarters. So we’ll add one more line to filter out individuals living in group quarters (a common practice when working with Census microdata). The code below adds a filter for Group Quarters. Since this table is showing correct results I’ll also add a little additional formatting to make it stand out from the others.</p>
<p>I’ll also note that the way the Census Bureau constructs weights is very convenient for getting totals. While I’m focusing on the percent of people who have internet access, the Yes and No columns are accurate estimates of the population with and without access.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Count numbers with and without high speed internet</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>df_group <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(GQ <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> GQ <span class="sc">==</span><span class="dv">2</span> <span class="sc">|</span> GQ <span class="sc">==</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(hspd_int, YEAR) <span class="sc">%&gt;%</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">count =</span> <span class="fu">sum</span>(PERWT), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Pivot for easier percent calculations</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>df_wide <span class="ot">&lt;-</span> df_group  <span class="sc">%&gt;%</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> <span class="fu">c</span>(YEAR), <span class="at">names_from =</span> hspd_int, <span class="at">values_from =</span> count) <span class="sc">%&gt;%</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent_hspd =</span> (Yes <span class="sc">/</span> (Yes <span class="sc">+</span> No)),</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">percent_no =</span> <span class="dv">1</span> <span class="sc">-</span> percent_hspd,</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">percent_NA =</span> (<span class="st">`</span><span class="at">NA</span><span class="st">`</span> <span class="sc">/</span> (Yes <span class="sc">+</span> No <span class="sc">+</span> <span class="st">`</span><span class="at">NA</span><span class="st">`</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div id="gdigkhqfru" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#gdigkhqfru) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 12px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 50%;
  border-top-style: solid;
  border-top-width: 3px;
  border-top-color: #D3D3D3;
  border-right-style: solid;
  border-right-width: 3px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 3px;
  border-bottom-color: #D3D3D3;
  border-left-style: solid;
  border-left-width: 3px;
  border-left-color: #D3D3D3;
}

:where(#gdigkhqfru) .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#gdigkhqfru) .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

:where(#gdigkhqfru) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#gdigkhqfru) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#gdigkhqfru) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#gdigkhqfru) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#gdigkhqfru) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#gdigkhqfru) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#gdigkhqfru) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#gdigkhqfru) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#gdigkhqfru) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#gdigkhqfru) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

:where(#gdigkhqfru) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#gdigkhqfru) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#gdigkhqfru) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#gdigkhqfru) .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#gdigkhqfru) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#gdigkhqfru) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#gdigkhqfru) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#gdigkhqfru) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#gdigkhqfru) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#gdigkhqfru) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#gdigkhqfru) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#gdigkhqfru) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#gdigkhqfru) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#gdigkhqfru) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#gdigkhqfru) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#gdigkhqfru) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#gdigkhqfru) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#gdigkhqfru) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#gdigkhqfru) .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#gdigkhqfru) .gt_left {
  text-align: left;
}

:where(#gdigkhqfru) .gt_center {
  text-align: center;
}

:where(#gdigkhqfru) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#gdigkhqfru) .gt_font_normal {
  font-weight: normal;
}

:where(#gdigkhqfru) .gt_font_bold {
  font-weight: bold;
}

:where(#gdigkhqfru) .gt_font_italic {
  font-style: italic;
}

:where(#gdigkhqfru) .gt_super {
  font-size: 65%;
}

:where(#gdigkhqfru) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#gdigkhqfru) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#gdigkhqfru) .gt_indent_1 {
  text-indent: 5px;
}

:where(#gdigkhqfru) .gt_indent_2 {
  text-indent: 10px;
}

:where(#gdigkhqfru) .gt_indent_3 {
  text-indent: 15px;
}

:where(#gdigkhqfru) .gt_indent_4 {
  text-indent: 20px;
}

:where(#gdigkhqfru) .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  <thead class="gt_header">
    <tr>
      <td colspan="7" class="gt_heading gt_title gt_font_normal gt_bottom_border" style="">Table 5: High Speed Internet in Kentucky</td>
    </tr>
    
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="2" colspan="1" scope="col" id="Year">Year</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="3" scope="colgroup" id="Percent">
        <span class="gt_column_spanner">Percent</span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="3" scope="colgroup" id="Number of People">
        <span class="gt_column_spanner">Number of People</span>
      </th>
    </tr>
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Yes">Yes</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="No">No</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="NA">NA</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Yes">Yes</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="No">No</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="NA">NA</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="YEAR" class="gt_row gt_center">2013</td>
<td headers="percent_hspd" class="gt_row gt_center">68%</td>
<td headers="percent_no" class="gt_row gt_center">32%</td>
<td headers="percent_NA" class="gt_row gt_center">4%</td>
<td headers="Yes" class="gt_row gt_center">2.76M</td>
<td headers="No" class="gt_row gt_center">1.32M</td>
<td headers="NA" class="gt_row gt_center">185K</td></tr>
    <tr><td headers="YEAR" class="gt_row gt_center gt_striped">2014</td>
<td headers="percent_hspd" class="gt_row gt_center gt_striped">67%</td>
<td headers="percent_no" class="gt_row gt_center gt_striped">33%</td>
<td headers="percent_NA" class="gt_row gt_center gt_striped">5%</td>
<td headers="Yes" class="gt_row gt_center gt_striped">2.74M</td>
<td headers="No" class="gt_row gt_center gt_striped">1.35M</td>
<td headers="NA" class="gt_row gt_center gt_striped">193K</td></tr>
    <tr><td headers="YEAR" class="gt_row gt_center">2015</td>
<td headers="percent_hspd" class="gt_row gt_center">70%</td>
<td headers="percent_no" class="gt_row gt_center">30%</td>
<td headers="percent_NA" class="gt_row gt_center">5%</td>
<td headers="Yes" class="gt_row gt_center">2.85M</td>
<td headers="No" class="gt_row gt_center">1.23M</td>
<td headers="NA" class="gt_row gt_center">217K</td></tr>
    <tr><td headers="YEAR" class="gt_row gt_center gt_striped">2016</td>
<td headers="percent_hspd" class="gt_row gt_center gt_striped">69%</td>
<td headers="percent_no" class="gt_row gt_center gt_striped">31%</td>
<td headers="percent_NA" class="gt_row gt_center gt_striped">3%</td>
<td headers="Yes" class="gt_row gt_center gt_striped">2.87M</td>
<td headers="No" class="gt_row gt_center gt_striped">1.30M</td>
<td headers="NA" class="gt_row gt_center gt_striped">129K</td></tr>
    <tr><td headers="YEAR" class="gt_row gt_center">2017</td>
<td headers="percent_hspd" class="gt_row gt_center">69%</td>
<td headers="percent_no" class="gt_row gt_center">31%</td>
<td headers="percent_NA" class="gt_row gt_center">3%</td>
<td headers="Yes" class="gt_row gt_center">2.90M</td>
<td headers="No" class="gt_row gt_center">1.29M</td>
<td headers="NA" class="gt_row gt_center">124K</td></tr>
    <tr><td headers="YEAR" class="gt_row gt_center gt_striped">2018</td>
<td headers="percent_hspd" class="gt_row gt_center gt_striped">71%</td>
<td headers="percent_no" class="gt_row gt_center gt_striped">29%</td>
<td headers="percent_NA" class="gt_row gt_center gt_striped">3%</td>
<td headers="Yes" class="gt_row gt_center gt_striped">2.97M</td>
<td headers="No" class="gt_row gt_center gt_striped">1.24M</td>
<td headers="NA" class="gt_row gt_center gt_striped">125K</td></tr>
  </tbody>
  <tfoot class="gt_sourcenotes">
    <tr>
      <td class="gt_sourcenote" colspan="7">Yes and No percentages are calculated out of those who answered. NA is reported out of all the data to provide context on how much data is missing.</td>
    </tr>
    <tr>
      <td class="gt_sourcenote" colspan="7">Source: Author's analysis of IPUMS data.</td>
    </tr>
  </tfoot>
  
</table>
</div>
</div>
</div>
<p>That removed about half of our NA values. It might be nice to know a bit more about the missing data, but at around 3 percent of observations it’s unlikely to change our substantive conclusions. I suspect these are cases where there wasn’t an answer for that question. We’ll keep an eye on NA values as we do the analysis, because as we get into questions like how internet access varies by race, income, age, and education we’ll want to know if NA answers are more or less likely in any of those categories.</p>
</section>
<section id="checking-against-data.census.gov" class="level2">
<h2 class="anchored" data-anchor-id="checking-against-data.census.gov">Checking against data.census.gov</h2>
<p>To do a quick check against the way the census bureau itself analyzes the data I looked at data.census.gov for 2018 in Kentucky. An important note is that their data is for households, and so their numeric counts look quite different because I’m counting number of people. They also have a breakdown where cellular is included in broadband, which I do not want, as a cell phone is not really an adequate work or study device. So to get to what I have we need to add “Broadband such as cable, fiber optic or DSL” and “Satellite Internet service”, which gets us to 70.8% compared to the 70.5% in this analysis. The difference is small and most likely the result of their analysis being weighted to the household level rather than the person level. (Internet is measured at the household level and the same for every person in the household, but by choosing to weight it at the person level I am a) letting us talk in terms of people, b) giving more weight to larger households, c) making it possible to break down internet access by categories that do vary within households, like age).</p>
<p><img src="data_census_gov.png" class="img-fluid"></p>
</section>
</section>
<section id="analysis" class="level1">
<h1>Analysis</h1>
<p>Going forward we’re going to want to filter by group quarters, so let’s apply that filter to our main dataframe.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(GQ <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> GQ <span class="sc">==</span><span class="dv">2</span> <span class="sc">|</span> GQ <span class="sc">==</span> <span class="dv">5</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="standard-errors" class="level2">
<h2 class="anchored" data-anchor-id="standard-errors">Standard Errors</h2>
<p>Know that we know the data we’d also like to know how uncertain our sample is so that we know if movements over time are real or just a result of noisy data. There are a few ways to do this. The <code>survey</code> package does an excellent job with complex survey designs, but does require learning a new syntax to use. The alternative I’ll use here is a method known as bootstrap. IPUMS suggests using bootstrap might be the best way to get standard errors on census microdata. The basic idea of the bootstrap is to resample the existing data and use the sampling error from that as an estimate for sampling error in the overall population. Let’s do an example with high speed internet in 2018 to see how it works. The output here will be the mean and standard deviation for Kentucky. (We’ll use the standard error to calculate confidence intervals once we start displaying actual results.)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">#set seed</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter to just 2018</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Exclude NA values</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Recode as numeric vector of 1 and 0</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co"># The numeric 1 and 0 form will make it much easier to get means without pivoting, which matters a lot when doing this 1000 times</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>df2018 <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(YEAR <span class="sc">==</span> <span class="dv">2018</span> <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(hspd_int)) <span class="sc">%&gt;%</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">hspd_num =</span> <span class="fu">if_else</span>(hspd_int <span class="sc">==</span> <span class="st">"Yes"</span>, <span class="dv">1</span>, <span class="dv">0</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(hspd_num, PERWT)</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Write a function so I can map over it.</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="co"># In this case, we need the function to do the same thing X number of times and assign an ID that we can use as a grouping variable</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>create_samples <span class="ot">&lt;-</span> <span class="cf">function</span>(sample_id){</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>  df_out <span class="ot">&lt;-</span> df2018[<span class="fu">sample</span>(<span class="fu">nrow</span>(df2018), <span class="fu">nrow</span>(df2018), <span class="at">replace =</span> <span class="cn">TRUE</span>) , ] <span class="sc">%&gt;%</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as_tibble</span>()</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>  df_out<span class="sc">$</span>sample_id <span class="ot">&lt;-</span> sample_id</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(df_out)</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>nlist <span class="ot">&lt;-</span> <span class="fu">as.list</span>(<span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">1000</span>, <span class="at">by =</span> <span class="dv">1</span>))</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>samples <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">map_df</span>(nlist, create_samples)</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>sample_summary <span class="ot">&lt;-</span> samples <span class="sc">%&gt;%</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(sample_id) <span class="sc">%&gt;%</span></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ind_weight =</span> PERWT <span class="sc">/</span> <span class="fu">sum</span>(PERWT),</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">hspd_weight =</span> hspd_num <span class="sc">*</span> ind_weight) <span class="sc">%&gt;%</span> <span class="co"># PERWT is population and doesn't sum to 1. Rescale it to sum to one</span></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">group_mean =</span> <span class="fu">sum</span>(hspd_weight),</span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>            <span class="at">weight_check =</span> <span class="fu">sum</span>(ind_weight), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="co"># Check that my weights add up to one</span></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>display_tbl <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">mean =</span> <span class="fu">mean</span>(sample_summary<span class="sc">$</span>group_mean),</span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>  <span class="at">sd =</span> <span class="fu">sd</span>(sample_summary<span class="sc">$</span>group_mean)</span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div id="exrrenlrkf" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#exrrenlrkf) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 12px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 50%;
  border-top-style: solid;
  border-top-width: 3px;
  border-top-color: #D3D3D3;
  border-right-style: solid;
  border-right-width: 3px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 3px;
  border-bottom-color: #D3D3D3;
  border-left-style: solid;
  border-left-width: 3px;
  border-left-color: #D3D3D3;
}

:where(#exrrenlrkf) .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#exrrenlrkf) .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

:where(#exrrenlrkf) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#exrrenlrkf) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#exrrenlrkf) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#exrrenlrkf) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#exrrenlrkf) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#exrrenlrkf) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#exrrenlrkf) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#exrrenlrkf) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#exrrenlrkf) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#exrrenlrkf) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

:where(#exrrenlrkf) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#exrrenlrkf) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#exrrenlrkf) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#exrrenlrkf) .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#exrrenlrkf) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#exrrenlrkf) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#exrrenlrkf) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#exrrenlrkf) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#exrrenlrkf) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#exrrenlrkf) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#exrrenlrkf) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#exrrenlrkf) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#exrrenlrkf) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#exrrenlrkf) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#exrrenlrkf) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#exrrenlrkf) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#exrrenlrkf) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#exrrenlrkf) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#exrrenlrkf) .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#exrrenlrkf) .gt_left {
  text-align: left;
}

:where(#exrrenlrkf) .gt_center {
  text-align: center;
}

:where(#exrrenlrkf) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#exrrenlrkf) .gt_font_normal {
  font-weight: normal;
}

:where(#exrrenlrkf) .gt_font_bold {
  font-weight: bold;
}

:where(#exrrenlrkf) .gt_font_italic {
  font-style: italic;
}

:where(#exrrenlrkf) .gt_super {
  font-size: 65%;
}

:where(#exrrenlrkf) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#exrrenlrkf) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#exrrenlrkf) .gt_indent_1 {
  text-indent: 5px;
}

:where(#exrrenlrkf) .gt_indent_2 {
  text-indent: 10px;
}

:where(#exrrenlrkf) .gt_indent_3 {
  text-indent: 15px;
}

:where(#exrrenlrkf) .gt_indent_4 {
  text-indent: 20px;
}

:where(#exrrenlrkf) .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="mean">mean</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="sd">sd</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="mean" class="gt_row gt_right">0.7053407</td>
<td headers="sd" class="gt_row gt_right">0.002866898</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>We can also take a look at our bootstrap graphically. We want to check that the distribution of the sample is roughly normal. If it’s not, that means we didn’t do enough bootstrap samples for the Central Limit Theorem to kick in.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Check that the distribution is normal and than the middle of the distribution is close to the 70.5% we estimated had internet access above</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sample_summary, <span class="fu">aes</span>(group_mean)) <span class="sc">+</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>() <span class="sc">+</span> <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Bootstrapped means of High Speed Internet Access"</span>,</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Mean"</span>, </span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Kernel Density"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="checking-our-results-against-the-survey-package" class="level2">
<h2 class="anchored" data-anchor-id="checking-our-results-against-the-survey-package">Checking our results against the survey package</h2>
<p>Above we found a mean of 0.705 for 2018 and and standard error of 0.0029 based on our bootstrap analysis. It’s worth checking that this is the same result we’d get using an analytic approach (instead of bootstrap).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Here we're assuming a simple design. </span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Survey requires the creation of a design object and then has functions that work with that object.</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co"># You can get more complicated, which is when the survey package would be most useful.</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>svy_df <span class="ot">&lt;-</span> <span class="fu">svydesign</span>(<span class="at">ids =</span> <span class="sc">~</span> <span class="dv">1</span>, <span class="at">weights =</span> <span class="sc">~</span>PERWT, <span class="at">data =</span> df2018)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Taking the mean and standard error from our design object</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>hint_tbl <span class="ot">&lt;-</span> <span class="fu">svymean</span>(<span class="sc">~</span>hspd_num, <span class="at">design =</span> svy_df)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>hint_tbl <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(hint_tbl)</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(hint_tbl) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"mean"</span>, <span class="st">"sd"</span>) <span class="co">#The names weren't coerced correctly when transforming into a tibble. </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div id="ntikghusxn" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#ntikghusxn) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 12px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 50%;
  border-top-style: solid;
  border-top-width: 3px;
  border-top-color: #D3D3D3;
  border-right-style: solid;
  border-right-width: 3px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 3px;
  border-bottom-color: #D3D3D3;
  border-left-style: solid;
  border-left-width: 3px;
  border-left-color: #D3D3D3;
}

:where(#ntikghusxn) .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#ntikghusxn) .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

:where(#ntikghusxn) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#ntikghusxn) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#ntikghusxn) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#ntikghusxn) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#ntikghusxn) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#ntikghusxn) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#ntikghusxn) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#ntikghusxn) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#ntikghusxn) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#ntikghusxn) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

:where(#ntikghusxn) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#ntikghusxn) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#ntikghusxn) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#ntikghusxn) .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#ntikghusxn) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ntikghusxn) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#ntikghusxn) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#ntikghusxn) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ntikghusxn) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#ntikghusxn) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#ntikghusxn) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#ntikghusxn) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ntikghusxn) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#ntikghusxn) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#ntikghusxn) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#ntikghusxn) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#ntikghusxn) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ntikghusxn) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#ntikghusxn) .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ntikghusxn) .gt_left {
  text-align: left;
}

:where(#ntikghusxn) .gt_center {
  text-align: center;
}

:where(#ntikghusxn) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#ntikghusxn) .gt_font_normal {
  font-weight: normal;
}

:where(#ntikghusxn) .gt_font_bold {
  font-weight: bold;
}

:where(#ntikghusxn) .gt_font_italic {
  font-style: italic;
}

:where(#ntikghusxn) .gt_super {
  font-size: 65%;
}

:where(#ntikghusxn) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#ntikghusxn) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#ntikghusxn) .gt_indent_1 {
  text-indent: 5px;
}

:where(#ntikghusxn) .gt_indent_2 {
  text-indent: 10px;
}

:where(#ntikghusxn) .gt_indent_3 {
  text-indent: 15px;
}

:where(#ntikghusxn) .gt_indent_4 {
  text-indent: 20px;
}

:where(#ntikghusxn) .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="mean">mean</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="sd">sd</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="mean" class="gt_row gt_right">0.7051774</td>
<td headers="sd" class="gt_row gt_right">0.00293509</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>These results are very similar. Following the IPUMS recommendation we’ll continue on with the bootstrap, but it’s good to know the results are the same for practical purposes. So now instead of just doing 2018, we’ll need to do every year. We already know the mean values for every year, and they’re still saved in the <code>df_wide</code> variable right now. So let’s write a function for bootstrap that will let us find standard errors for every year or for any other grouping we choose.</p>
</section>
<section id="writing-a-bootstrap-function" class="level2">
<h2 class="anchored" data-anchor-id="writing-a-bootstrap-function">Writing a bootstrap function</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a helper function</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co"># It needs to have a way to recieve the dataframe from the function that calls it, so we've added a second argument</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>create_samples <span class="ot">&lt;-</span> <span class="cf">function</span>(sample_id, df){</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  df_out <span class="ot">&lt;-</span> df[<span class="fu">sample</span>(<span class="fu">nrow</span>(df), <span class="fu">nrow</span>(df), <span class="at">replace =</span> <span class="cn">TRUE</span>) , ] <span class="sc">%&gt;%</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as_tibble</span>()</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  df_out<span class="sc">$</span>sample_id <span class="ot">&lt;-</span> sample_id</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(df_out)</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Need to be able to take in grouping variables so that the summaries can be specific to the groups</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Using the embrace {{}} notation allows use to pass in unquoted variables to the function. </span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>bootstrap_pums <span class="ot">&lt;-</span> <span class="cf">function</span>(df, num_samples, group_vars) {</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>  nlist <span class="ot">&lt;-</span> <span class="fu">as.list</span>(<span class="fu">seq</span>(<span class="dv">1</span>, num_samples, <span class="at">by =</span> <span class="dv">1</span>))</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>  samples <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">map_df</span>(nlist, create_samples, df)</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>  sample_summary <span class="ot">&lt;-</span> samples <span class="sc">%&gt;%</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>( sample_id, <span class="fu">across</span>( {{group_vars}} )) <span class="sc">%&gt;%</span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">ind_weight =</span> PERWT <span class="sc">/</span> <span class="fu">sum</span>(PERWT),</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>           <span class="at">hspd_weight =</span> hspd_n <span class="sc">*</span> ind_weight) <span class="sc">%&gt;%</span> <span class="co"># PERWT sums to population instead of to 1. Rescale it to sum to 1.</span></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">group_mean =</span> <span class="fu">sum</span>(hspd_weight), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="co"># Not dropping .groups here results in problems in the next group_by call.</span></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>  sample_sd <span class="ot">&lt;-</span> sample_summary <span class="sc">%&gt;%</span></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>( <span class="fu">across</span>( {{ group_vars }} )) <span class="sc">%&gt;%</span></span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">sd =</span> <span class="fu">sd</span>(group_mean), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a><span class="co"># We do need to prep the data a little so that we're not carrying through the whole dataframe.</span></span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>df_in <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>   <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(hspd_int)) <span class="sc">%&gt;%</span></span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">hspd_n =</span> <span class="fu">if_else</span>(hspd_int <span class="sc">==</span> <span class="st">"Yes"</span>, <span class="dv">1</span>, <span class="dv">0</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>   <span class="fu">select</span>(hspd_n, PERWT, YEAR)</span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a><span class="co"># And finally we can call the function</span></span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a>boot_results <span class="ot">&lt;-</span> <span class="fu">bootstrap_pums</span>(<span class="at">df =</span> df_in, <span class="at">num_samples =</span> <span class="dv">500</span>, <span class="at">group_vars =</span> YEAR)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now that we have our bootstrap standard errors we can combine them with the data and plot them. We’ll use 95% confidence intervals, which we get by multiplying the standard error by 1.96 (the number of standard deviations that corresponds to a 95% confidence interval).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>df_plt <span class="ot">&lt;-</span> df_wide <span class="sc">%&gt;%</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(boot_results, <span class="at">by =</span> <span class="st">"YEAR"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(<span class="at">Year =</span> YEAR,</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">Percent =</span> <span class="dv">100</span> <span class="sc">*</span> percent_hspd,</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">me =</span> <span class="dv">100</span> <span class="sc">*</span> <span class="fl">1.96</span> <span class="sc">*</span> sd)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>plt_int <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_plt, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Percent)) <span class="sc">+</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> Percent <span class="sc">-</span> me, <span class="at">ymax =</span> Percent <span class="sc">+</span> me), <span class="at">width =</span> .<span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"High Speed Internet Access"</span>) <span class="sc">+</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>plt_int</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/plot bootstrap-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="race-poverty-age-and-geography" class="level2">
<h2 class="anchored" data-anchor-id="race-poverty-age-and-geography">Race, Poverty, Age, and Geography</h2>
<p>Going a little deeper we can use microdata to get results by custom groupings. I’ll show examples for race, poverty, age, and geography, but for any group you can construct with available Census data you can produce an estimate for their internet acess.</p>
<section id="race" class="level3">
<h3 class="anchored" data-anchor-id="race">Race</h3>
<p>Next we’ll build a table by race and year.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's build a table first and then we'll do the standard errors</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Coding a race variable using case_when</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">race =</span> <span class="fu">case_when</span>(</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>            RACE <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">"White"</span>,</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>            RACE <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">"Black"</span>,</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>            RACE <span class="sc">&gt;</span> <span class="dv">3</span> <span class="sc">&amp;</span> RACE <span class="sc">&lt;</span> <span class="dv">7</span> <span class="sc">~</span> <span class="st">"Asian"</span>,</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>            HISPAN <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> HISPAN <span class="sc">&lt;</span> <span class="dv">5</span> <span class="sc">~</span> <span class="st">"Hispanic"</span>,</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>            <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"All Others"</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>          ))</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>df_group <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(hspd_int, race, YEAR) <span class="sc">%&gt;%</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">count =</span> <span class="fu">sum</span>(PERWT), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Pivot for easier percent calculations</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>df_wide <span class="ot">&lt;-</span> df_group  <span class="sc">%&gt;%</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> <span class="fu">c</span>(race, YEAR), <span class="at">names_from =</span> hspd_int, <span class="at">values_from =</span> count) <span class="sc">%&gt;%</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent_hspd =</span> (Yes <span class="sc">/</span> (Yes <span class="sc">+</span> No)),</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>         <span class="at">percent_no =</span> <span class="dv">1</span> <span class="sc">-</span> percent_hspd,</span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>         <span class="at">percent_NA =</span> (<span class="st">`</span><span class="at">NA</span><span class="st">`</span> <span class="sc">/</span> (Yes <span class="sc">+</span> No <span class="sc">+</span> <span class="st">`</span><span class="at">NA</span><span class="st">`</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div id="bezsmvzedz" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#bezsmvzedz) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 12px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 50%;
  border-top-style: solid;
  border-top-width: 3px;
  border-top-color: #D3D3D3;
  border-right-style: solid;
  border-right-width: 3px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 3px;
  border-bottom-color: #D3D3D3;
  border-left-style: solid;
  border-left-width: 3px;
  border-left-color: #D3D3D3;
}

:where(#bezsmvzedz) .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#bezsmvzedz) .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

:where(#bezsmvzedz) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#bezsmvzedz) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#bezsmvzedz) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#bezsmvzedz) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#bezsmvzedz) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#bezsmvzedz) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#bezsmvzedz) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#bezsmvzedz) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#bezsmvzedz) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#bezsmvzedz) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

:where(#bezsmvzedz) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#bezsmvzedz) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#bezsmvzedz) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#bezsmvzedz) .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#bezsmvzedz) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#bezsmvzedz) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#bezsmvzedz) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#bezsmvzedz) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#bezsmvzedz) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#bezsmvzedz) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#bezsmvzedz) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#bezsmvzedz) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#bezsmvzedz) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#bezsmvzedz) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#bezsmvzedz) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#bezsmvzedz) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#bezsmvzedz) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#bezsmvzedz) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#bezsmvzedz) .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#bezsmvzedz) .gt_left {
  text-align: left;
}

:where(#bezsmvzedz) .gt_center {
  text-align: center;
}

:where(#bezsmvzedz) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#bezsmvzedz) .gt_font_normal {
  font-weight: normal;
}

:where(#bezsmvzedz) .gt_font_bold {
  font-weight: bold;
}

:where(#bezsmvzedz) .gt_font_italic {
  font-style: italic;
}

:where(#bezsmvzedz) .gt_super {
  font-size: 65%;
}

:where(#bezsmvzedz) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#bezsmvzedz) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#bezsmvzedz) .gt_indent_1 {
  text-indent: 5px;
}

:where(#bezsmvzedz) .gt_indent_2 {
  text-indent: 10px;
}

:where(#bezsmvzedz) .gt_indent_3 {
  text-indent: 15px;
}

:where(#bezsmvzedz) .gt_indent_4 {
  text-indent: 20px;
}

:where(#bezsmvzedz) .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  <thead class="gt_header">
    <tr>
      <td colspan="7" class="gt_heading gt_title gt_font_normal" style="">Table 6: High Speed Internet Access</td>
    </tr>
    <tr>
      <td colspan="7" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style="">By Race and Ethnicity</td>
    </tr>
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="2" colspan="1" scope="col" id="Year">Year</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="3" scope="colgroup" id="Percent">
        <span class="gt_column_spanner">Percent</span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="3" scope="colgroup" id="Number of People">
        <span class="gt_column_spanner">Number of People</span>
      </th>
    </tr>
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Yes">Yes</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="No">No</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="NA">NA</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Yes">Yes</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="No">No</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="NA">NA</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr class="gt_group_heading_row">
      <th colspan="7" class="gt_group_heading" scope="colgroup" id="Asian">Asian</th>
    </tr>
    <tr class="gt_row_group_first"><td headers="Asian  YEAR" class="gt_row gt_center">2013</td>
<td headers="Asian  percent_hspd" class="gt_row gt_center">84%</td>
<td headers="Asian  percent_no" class="gt_row gt_center">16%</td>
<td headers="Asian  percent_NA" class="gt_row gt_center">4%</td>
<td headers="Asian  Yes" class="gt_row gt_center">42.2K</td>
<td headers="Asian  No" class="gt_row gt_center">8.03K</td>
<td headers="Asian  NA" class="gt_row gt_center">2.06K</td></tr>
    <tr><td headers="Asian  YEAR" class="gt_row gt_center gt_striped">2014</td>
<td headers="Asian  percent_hspd" class="gt_row gt_center gt_striped">76%</td>
<td headers="Asian  percent_no" class="gt_row gt_center gt_striped">24%</td>
<td headers="Asian  percent_NA" class="gt_row gt_center gt_striped">2%</td>
<td headers="Asian  Yes" class="gt_row gt_center gt_striped">41.6K</td>
<td headers="Asian  No" class="gt_row gt_center gt_striped">12.9K</td>
<td headers="Asian  NA" class="gt_row gt_center gt_striped">1.19K</td></tr>
    <tr><td headers="Asian  YEAR" class="gt_row gt_center">2015</td>
<td headers="Asian  percent_hspd" class="gt_row gt_center">83%</td>
<td headers="Asian  percent_no" class="gt_row gt_center">17%</td>
<td headers="Asian  percent_NA" class="gt_row gt_center">3%</td>
<td headers="Asian  Yes" class="gt_row gt_center">48.8K</td>
<td headers="Asian  No" class="gt_row gt_center">10.3K</td>
<td headers="Asian  NA" class="gt_row gt_center">1.76K</td></tr>
    <tr><td headers="Asian  YEAR" class="gt_row gt_center gt_striped">2016</td>
<td headers="Asian  percent_hspd" class="gt_row gt_center gt_striped">77%</td>
<td headers="Asian  percent_no" class="gt_row gt_center gt_striped">23%</td>
<td headers="Asian  percent_NA" class="gt_row gt_center gt_striped">10%</td>
<td headers="Asian  Yes" class="gt_row gt_center gt_striped">43.8K</td>
<td headers="Asian  No" class="gt_row gt_center gt_striped">13.0K</td>
<td headers="Asian  NA" class="gt_row gt_center gt_striped">6.55K</td></tr>
    <tr><td headers="Asian  YEAR" class="gt_row gt_center">2017</td>
<td headers="Asian  percent_hspd" class="gt_row gt_center">80%</td>
<td headers="Asian  percent_no" class="gt_row gt_center">20%</td>
<td headers="Asian  percent_NA" class="gt_row gt_center">1%</td>
<td headers="Asian  Yes" class="gt_row gt_center">52.5K</td>
<td headers="Asian  No" class="gt_row gt_center">12.9K</td>
<td headers="Asian  NA" class="gt_row gt_center">703</td></tr>
    <tr><td headers="Asian  YEAR" class="gt_row gt_center gt_striped">2018</td>
<td headers="Asian  percent_hspd" class="gt_row gt_center gt_striped">82%</td>
<td headers="Asian  percent_no" class="gt_row gt_center gt_striped">18%</td>
<td headers="Asian  percent_NA" class="gt_row gt_center gt_striped">3%</td>
<td headers="Asian  Yes" class="gt_row gt_center gt_striped">52.8K</td>
<td headers="Asian  No" class="gt_row gt_center gt_striped">11.7K</td>
<td headers="Asian  NA" class="gt_row gt_center gt_striped">1.66K</td></tr>
    <tr class="gt_group_heading_row">
      <th colspan="7" class="gt_group_heading" scope="colgroup" id="Black">Black</th>
    </tr>
    <tr class="gt_row_group_first"><td headers="Black  YEAR" class="gt_row gt_center">2013</td>
<td headers="Black  percent_hspd" class="gt_row gt_center">64%</td>
<td headers="Black  percent_no" class="gt_row gt_center">36%</td>
<td headers="Black  percent_NA" class="gt_row gt_center">9%</td>
<td headers="Black  Yes" class="gt_row gt_center">192K</td>
<td headers="Black  No" class="gt_row gt_center">106K</td>
<td headers="Black  NA" class="gt_row gt_center">28.7K</td></tr>
    <tr><td headers="Black  YEAR" class="gt_row gt_center gt_striped">2014</td>
<td headers="Black  percent_hspd" class="gt_row gt_center gt_striped">58%</td>
<td headers="Black  percent_no" class="gt_row gt_center gt_striped">42%</td>
<td headers="Black  percent_NA" class="gt_row gt_center gt_striped">9%</td>
<td headers="Black  Yes" class="gt_row gt_center gt_striped">171K</td>
<td headers="Black  No" class="gt_row gt_center gt_striped">122K</td>
<td headers="Black  NA" class="gt_row gt_center gt_striped">30.3K</td></tr>
    <tr><td headers="Black  YEAR" class="gt_row gt_center">2015</td>
<td headers="Black  percent_hspd" class="gt_row gt_center">62%</td>
<td headers="Black  percent_no" class="gt_row gt_center">38%</td>
<td headers="Black  percent_NA" class="gt_row gt_center">12%</td>
<td headers="Black  Yes" class="gt_row gt_center">183K</td>
<td headers="Black  No" class="gt_row gt_center">113K</td>
<td headers="Black  NA" class="gt_row gt_center">40.5K</td></tr>
    <tr><td headers="Black  YEAR" class="gt_row gt_center gt_striped">2016</td>
<td headers="Black  percent_hspd" class="gt_row gt_center gt_striped">62%</td>
<td headers="Black  percent_no" class="gt_row gt_center gt_striped">38%</td>
<td headers="Black  percent_NA" class="gt_row gt_center gt_striped">5%</td>
<td headers="Black  Yes" class="gt_row gt_center gt_striped">204K</td>
<td headers="Black  No" class="gt_row gt_center gt_striped">127K</td>
<td headers="Black  NA" class="gt_row gt_center gt_striped">15.6K</td></tr>
    <tr><td headers="Black  YEAR" class="gt_row gt_center">2017</td>
<td headers="Black  percent_hspd" class="gt_row gt_center">64%</td>
<td headers="Black  percent_no" class="gt_row gt_center">36%</td>
<td headers="Black  percent_NA" class="gt_row gt_center">2%</td>
<td headers="Black  Yes" class="gt_row gt_center">216K</td>
<td headers="Black  No" class="gt_row gt_center">122K</td>
<td headers="Black  NA" class="gt_row gt_center">8.04K</td></tr>
    <tr><td headers="Black  YEAR" class="gt_row gt_center gt_striped">2018</td>
<td headers="Black  percent_hspd" class="gt_row gt_center gt_striped">62%</td>
<td headers="Black  percent_no" class="gt_row gt_center gt_striped">38%</td>
<td headers="Black  percent_NA" class="gt_row gt_center gt_striped">3%</td>
<td headers="Black  Yes" class="gt_row gt_center gt_striped">200K</td>
<td headers="Black  No" class="gt_row gt_center gt_striped">122K</td>
<td headers="Black  NA" class="gt_row gt_center gt_striped">9.90K</td></tr>
    <tr class="gt_group_heading_row">
      <th colspan="7" class="gt_group_heading" scope="colgroup" id="Hispanic">Hispanic</th>
    </tr>
    <tr class="gt_row_group_first"><td headers="Hispanic  YEAR" class="gt_row gt_center">2013</td>
<td headers="Hispanic  percent_hspd" class="gt_row gt_center">48%</td>
<td headers="Hispanic  percent_no" class="gt_row gt_center">52%</td>
<td headers="Hispanic  percent_NA" class="gt_row gt_center">4%</td>
<td headers="Hispanic  Yes" class="gt_row gt_center">21.6K</td>
<td headers="Hispanic  No" class="gt_row gt_center">23.8K</td>
<td headers="Hispanic  NA" class="gt_row gt_center">1.90K</td></tr>
    <tr><td headers="Hispanic  YEAR" class="gt_row gt_center gt_striped">2014</td>
<td headers="Hispanic  percent_hspd" class="gt_row gt_center gt_striped">38%</td>
<td headers="Hispanic  percent_no" class="gt_row gt_center gt_striped">62%</td>
<td headers="Hispanic  percent_NA" class="gt_row gt_center gt_striped">12%</td>
<td headers="Hispanic  Yes" class="gt_row gt_center gt_striped">15.7K</td>
<td headers="Hispanic  No" class="gt_row gt_center gt_striped">25.2K</td>
<td headers="Hispanic  NA" class="gt_row gt_center gt_striped">5.66K</td></tr>
    <tr><td headers="Hispanic  YEAR" class="gt_row gt_center">2015</td>
<td headers="Hispanic  percent_hspd" class="gt_row gt_center">47%</td>
<td headers="Hispanic  percent_no" class="gt_row gt_center">53%</td>
<td headers="Hispanic  percent_NA" class="gt_row gt_center">10%</td>
<td headers="Hispanic  Yes" class="gt_row gt_center">17.2K</td>
<td headers="Hispanic  No" class="gt_row gt_center">19.5K</td>
<td headers="Hispanic  NA" class="gt_row gt_center">4.01K</td></tr>
    <tr><td headers="Hispanic  YEAR" class="gt_row gt_center gt_striped">2016</td>
<td headers="Hispanic  percent_hspd" class="gt_row gt_center gt_striped">59%</td>
<td headers="Hispanic  percent_no" class="gt_row gt_center gt_striped">41%</td>
<td headers="Hispanic  percent_NA" class="gt_row gt_center gt_striped">4%</td>
<td headers="Hispanic  Yes" class="gt_row gt_center gt_striped">23.0K</td>
<td headers="Hispanic  No" class="gt_row gt_center gt_striped">15.8K</td>
<td headers="Hispanic  NA" class="gt_row gt_center gt_striped">1.59K</td></tr>
    <tr><td headers="Hispanic  YEAR" class="gt_row gt_center">2017</td>
<td headers="Hispanic  percent_hspd" class="gt_row gt_center">57%</td>
<td headers="Hispanic  percent_no" class="gt_row gt_center">43%</td>
<td headers="Hispanic  percent_NA" class="gt_row gt_center">1%</td>
<td headers="Hispanic  Yes" class="gt_row gt_center">24.7K</td>
<td headers="Hispanic  No" class="gt_row gt_center">18.5K</td>
<td headers="Hispanic  NA" class="gt_row gt_center">421</td></tr>
    <tr><td headers="Hispanic  YEAR" class="gt_row gt_center gt_striped">2018</td>
<td headers="Hispanic  percent_hspd" class="gt_row gt_center gt_striped">59%</td>
<td headers="Hispanic  percent_no" class="gt_row gt_center gt_striped">41%</td>
<td headers="Hispanic  percent_NA" class="gt_row gt_center gt_striped">1%</td>
<td headers="Hispanic  Yes" class="gt_row gt_center gt_striped">30.9K</td>
<td headers="Hispanic  No" class="gt_row gt_center gt_striped">21.1K</td>
<td headers="Hispanic  NA" class="gt_row gt_center gt_striped">616</td></tr>
    <tr class="gt_group_heading_row">
      <th colspan="7" class="gt_group_heading" scope="colgroup" id="White">White</th>
    </tr>
    <tr class="gt_row_group_first"><td headers="White  YEAR" class="gt_row gt_center">2013</td>
<td headers="White  percent_hspd" class="gt_row gt_center">68%</td>
<td headers="White  percent_no" class="gt_row gt_center">32%</td>
<td headers="White  percent_NA" class="gt_row gt_center">4%</td>
<td headers="White  Yes" class="gt_row gt_center">2.45M</td>
<td headers="White  No" class="gt_row gt_center">1.16M</td>
<td headers="White  NA" class="gt_row gt_center">148K</td></tr>
    <tr><td headers="White  YEAR" class="gt_row gt_center gt_striped">2014</td>
<td headers="White  percent_hspd" class="gt_row gt_center gt_striped">68%</td>
<td headers="White  percent_no" class="gt_row gt_center gt_striped">32%</td>
<td headers="White  percent_NA" class="gt_row gt_center gt_striped">4%</td>
<td headers="White  Yes" class="gt_row gt_center gt_striped">2.44M</td>
<td headers="White  No" class="gt_row gt_center gt_striped">1.16M</td>
<td headers="White  NA" class="gt_row gt_center gt_striped">152K</td></tr>
    <tr><td headers="White  YEAR" class="gt_row gt_center">2015</td>
<td headers="White  percent_hspd" class="gt_row gt_center">70%</td>
<td headers="White  percent_no" class="gt_row gt_center">30%</td>
<td headers="White  percent_NA" class="gt_row gt_center">4%</td>
<td headers="White  Yes" class="gt_row gt_center">2.54M</td>
<td headers="White  No" class="gt_row gt_center">1.07M</td>
<td headers="White  NA" class="gt_row gt_center">164K</td></tr>
    <tr><td headers="White  YEAR" class="gt_row gt_center gt_striped">2016</td>
<td headers="White  percent_hspd" class="gt_row gt_center gt_striped">69%</td>
<td headers="White  percent_no" class="gt_row gt_center gt_striped">31%</td>
<td headers="White  percent_NA" class="gt_row gt_center gt_striped">3%</td>
<td headers="White  Yes" class="gt_row gt_center gt_striped">2.54M</td>
<td headers="White  No" class="gt_row gt_center gt_striped">1.13M</td>
<td headers="White  NA" class="gt_row gt_center gt_striped">102K</td></tr>
    <tr><td headers="White  YEAR" class="gt_row gt_center">2017</td>
<td headers="White  percent_hspd" class="gt_row gt_center">70%</td>
<td headers="White  percent_no" class="gt_row gt_center">30%</td>
<td headers="White  percent_NA" class="gt_row gt_center">3%</td>
<td headers="White  Yes" class="gt_row gt_center">2.54M</td>
<td headers="White  No" class="gt_row gt_center">1.11M</td>
<td headers="White  NA" class="gt_row gt_center">113K</td></tr>
    <tr><td headers="White  YEAR" class="gt_row gt_center gt_striped">2018</td>
<td headers="White  percent_hspd" class="gt_row gt_center gt_striped">71%</td>
<td headers="White  percent_no" class="gt_row gt_center gt_striped">29%</td>
<td headers="White  percent_NA" class="gt_row gt_center gt_striped">3%</td>
<td headers="White  Yes" class="gt_row gt_center gt_striped">2.61M</td>
<td headers="White  No" class="gt_row gt_center gt_striped">1.06M</td>
<td headers="White  NA" class="gt_row gt_center gt_striped">108K</td></tr>
    <tr class="gt_group_heading_row">
      <th colspan="7" class="gt_group_heading" scope="colgroup" id="All Other Races">All Other Races</th>
    </tr>
    <tr class="gt_row_group_first"><td headers="All Other Races  YEAR" class="gt_row gt_center">2013</td>
<td headers="All Other Races  percent_hspd" class="gt_row gt_center">72%</td>
<td headers="All Other Races  percent_no" class="gt_row gt_center">28%</td>
<td headers="All Other Races  percent_NA" class="gt_row gt_center">6%</td>
<td headers="All Other Races  Yes" class="gt_row gt_center">58.3K</td>
<td headers="All Other Races  No" class="gt_row gt_center">22.3K</td>
<td headers="All Other Races  NA" class="gt_row gt_center">4.90K</td></tr>
    <tr><td headers="All Other Races  YEAR" class="gt_row gt_center gt_striped">2014</td>
<td headers="All Other Races  percent_hspd" class="gt_row gt_center gt_striped">70%</td>
<td headers="All Other Races  percent_no" class="gt_row gt_center gt_striped">30%</td>
<td headers="All Other Races  percent_NA" class="gt_row gt_center gt_striped">4%</td>
<td headers="All Other Races  Yes" class="gt_row gt_center gt_striped">65.9K</td>
<td headers="All Other Races  No" class="gt_row gt_center gt_striped">27.7K</td>
<td headers="All Other Races  NA" class="gt_row gt_center gt_striped">3.91K</td></tr>
    <tr><td headers="All Other Races  YEAR" class="gt_row gt_center">2015</td>
<td headers="All Other Races  percent_hspd" class="gt_row gt_center">71%</td>
<td headers="All Other Races  percent_no" class="gt_row gt_center">29%</td>
<td headers="All Other Races  percent_NA" class="gt_row gt_center">7%</td>
<td headers="All Other Races  Yes" class="gt_row gt_center">59.6K</td>
<td headers="All Other Races  No" class="gt_row gt_center">24.3K</td>
<td headers="All Other Races  NA" class="gt_row gt_center">6.19K</td></tr>
    <tr><td headers="All Other Races  YEAR" class="gt_row gt_center gt_striped">2016</td>
<td headers="All Other Races  percent_hspd" class="gt_row gt_center gt_striped">75%</td>
<td headers="All Other Races  percent_no" class="gt_row gt_center gt_striped">25%</td>
<td headers="All Other Races  percent_NA" class="gt_row gt_center gt_striped">4%</td>
<td headers="All Other Races  Yes" class="gt_row gt_center gt_striped">63.2K</td>
<td headers="All Other Races  No" class="gt_row gt_center gt_striped">21.3K</td>
<td headers="All Other Races  NA" class="gt_row gt_center gt_striped">3.12K</td></tr>
    <tr><td headers="All Other Races  YEAR" class="gt_row gt_center">2017</td>
<td headers="All Other Races  percent_hspd" class="gt_row gt_center">71%</td>
<td headers="All Other Races  percent_no" class="gt_row gt_center">29%</td>
<td headers="All Other Races  percent_NA" class="gt_row gt_center">2%</td>
<td headers="All Other Races  Yes" class="gt_row gt_center">68.9K</td>
<td headers="All Other Races  No" class="gt_row gt_center">28.2K</td>
<td headers="All Other Races  NA" class="gt_row gt_center">2.23K</td></tr>
    <tr><td headers="All Other Races  YEAR" class="gt_row gt_center gt_striped">2018</td>
<td headers="All Other Races  percent_hspd" class="gt_row gt_center gt_striped">72%</td>
<td headers="All Other Races  percent_no" class="gt_row gt_center gt_striped">28%</td>
<td headers="All Other Races  percent_NA" class="gt_row gt_center gt_striped">5%</td>
<td headers="All Other Races  Yes" class="gt_row gt_center gt_striped">73.9K</td>
<td headers="All Other Races  No" class="gt_row gt_center gt_striped">29.4K</td>
<td headers="All Other Races  NA" class="gt_row gt_center gt_striped">5.28K</td></tr>
  </tbody>
  <tfoot class="gt_sourcenotes">
    <tr>
      <td class="gt_sourcenote" colspan="7">Yes and No percentages are calculated out of those who answered. NA is reported out of all the data to provide context on how much data is missing.</td>
    </tr>
    <tr>
      <td class="gt_sourcenote" colspan="7">Source: Author's analysis of IPUMS data.</td>
    </tr>
  </tfoot>
  
</table>
</div>
</div>
</div>
<p>While we do see high NA values in some years, overall they’re at reasonable levels and seem to be lowest in 2018. This table is quite long though. While that works for exploring the data, for an actual display we’d probably want to focus on just 2018 and show the history in a graph. Below is the table filtered to just 2018 and slightly reformatted.</p>
<div class="cell">
<div class="cell-output-display">

<div id="ewhkpzyrez" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#ewhkpzyrez) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 12px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 50%;
  border-top-style: solid;
  border-top-width: 3px;
  border-top-color: #D3D3D3;
  border-right-style: solid;
  border-right-width: 3px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 3px;
  border-bottom-color: #D3D3D3;
  border-left-style: solid;
  border-left-width: 3px;
  border-left-color: #D3D3D3;
}

:where(#ewhkpzyrez) .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#ewhkpzyrez) .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

:where(#ewhkpzyrez) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#ewhkpzyrez) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#ewhkpzyrez) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#ewhkpzyrez) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#ewhkpzyrez) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#ewhkpzyrez) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#ewhkpzyrez) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#ewhkpzyrez) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#ewhkpzyrez) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#ewhkpzyrez) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

:where(#ewhkpzyrez) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#ewhkpzyrez) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#ewhkpzyrez) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#ewhkpzyrez) .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#ewhkpzyrez) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ewhkpzyrez) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#ewhkpzyrez) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#ewhkpzyrez) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ewhkpzyrez) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#ewhkpzyrez) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#ewhkpzyrez) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#ewhkpzyrez) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ewhkpzyrez) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#ewhkpzyrez) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#ewhkpzyrez) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#ewhkpzyrez) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#ewhkpzyrez) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ewhkpzyrez) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#ewhkpzyrez) .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ewhkpzyrez) .gt_left {
  text-align: left;
}

:where(#ewhkpzyrez) .gt_center {
  text-align: center;
}

:where(#ewhkpzyrez) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#ewhkpzyrez) .gt_font_normal {
  font-weight: normal;
}

:where(#ewhkpzyrez) .gt_font_bold {
  font-weight: bold;
}

:where(#ewhkpzyrez) .gt_font_italic {
  font-style: italic;
}

:where(#ewhkpzyrez) .gt_super {
  font-size: 65%;
}

:where(#ewhkpzyrez) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#ewhkpzyrez) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#ewhkpzyrez) .gt_indent_1 {
  text-indent: 5px;
}

:where(#ewhkpzyrez) .gt_indent_2 {
  text-indent: 10px;
}

:where(#ewhkpzyrez) .gt_indent_3 {
  text-indent: 15px;
}

:where(#ewhkpzyrez) .gt_indent_4 {
  text-indent: 20px;
}

:where(#ewhkpzyrez) .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  <thead class="gt_header">
    <tr>
      <td colspan="7" class="gt_heading gt_title gt_font_normal" style="">Table 7: High Speed Internet Access in 2018</td>
    </tr>
    <tr>
      <td colspan="7" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style="">By Race and Ethnicity</td>
    </tr>
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="2" colspan="1" scope="col" id="Race/Ethnicity">Race/Ethnicity</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="3" scope="colgroup" id="Percent">
        <span class="gt_column_spanner">Percent</span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="3" scope="colgroup" id="Number of People">
        <span class="gt_column_spanner">Number of People</span>
      </th>
    </tr>
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Yes">Yes</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="No">No</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="NA">NA</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Yes">Yes</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="No">No</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="NA">NA</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="race" class="gt_row gt_center">All Others</td>
<td headers="percent_hspd" class="gt_row gt_center">72%</td>
<td headers="percent_no" class="gt_row gt_center">28%</td>
<td headers="percent_NA" class="gt_row gt_center">5%</td>
<td headers="Yes" class="gt_row gt_center">73.9K</td>
<td headers="No" class="gt_row gt_center">29.4K</td>
<td headers="NA" class="gt_row gt_center">5.28K</td></tr>
    <tr><td headers="race" class="gt_row gt_center gt_striped">Asian</td>
<td headers="percent_hspd" class="gt_row gt_center gt_striped">82%</td>
<td headers="percent_no" class="gt_row gt_center gt_striped">18%</td>
<td headers="percent_NA" class="gt_row gt_center gt_striped">3%</td>
<td headers="Yes" class="gt_row gt_center gt_striped">52.8K</td>
<td headers="No" class="gt_row gt_center gt_striped">11.7K</td>
<td headers="NA" class="gt_row gt_center gt_striped">1.66K</td></tr>
    <tr><td headers="race" class="gt_row gt_center">Black</td>
<td headers="percent_hspd" class="gt_row gt_center">62%</td>
<td headers="percent_no" class="gt_row gt_center">38%</td>
<td headers="percent_NA" class="gt_row gt_center">3%</td>
<td headers="Yes" class="gt_row gt_center">200K</td>
<td headers="No" class="gt_row gt_center">122K</td>
<td headers="NA" class="gt_row gt_center">9.90K</td></tr>
    <tr><td headers="race" class="gt_row gt_center gt_striped">Hispanic</td>
<td headers="percent_hspd" class="gt_row gt_center gt_striped">59%</td>
<td headers="percent_no" class="gt_row gt_center gt_striped">41%</td>
<td headers="percent_NA" class="gt_row gt_center gt_striped">1%</td>
<td headers="Yes" class="gt_row gt_center gt_striped">30.9K</td>
<td headers="No" class="gt_row gt_center gt_striped">21.1K</td>
<td headers="NA" class="gt_row gt_center gt_striped">616</td></tr>
    <tr><td headers="race" class="gt_row gt_center">White</td>
<td headers="percent_hspd" class="gt_row gt_center">71%</td>
<td headers="percent_no" class="gt_row gt_center">29%</td>
<td headers="percent_NA" class="gt_row gt_center">3%</td>
<td headers="Yes" class="gt_row gt_center">2.61M</td>
<td headers="No" class="gt_row gt_center">1.06M</td>
<td headers="NA" class="gt_row gt_center">108K</td></tr>
  </tbody>
  <tfoot class="gt_sourcenotes">
    <tr>
      <td class="gt_sourcenote" colspan="7">Yes and No percentages are calculated out of those who answered. NA is reported out of all the data to provide context on how much data is missing.</td>
    </tr>
    <tr>
      <td class="gt_sourcenote" colspan="7">Source: Author's analysis of IPUMS data.</td>
    </tr>
  </tfoot>
  
</table>
</div>
</div>
</div>
<p>Now let’s add standard errors and graph the data. I’ll write the code for graphing the data as a function since we will use it again.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># We do need to prep the data a little so that we're not carrying through the whole dataframe.</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>df_in <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(hspd_int)) <span class="sc">%&gt;%</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">hspd_n =</span> <span class="fu">if_else</span>(hspd_int <span class="sc">==</span> <span class="st">"Yes"</span>, <span class="dv">1</span>, <span class="dv">0</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(hspd_n, PERWT, YEAR, race)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co"># And we can call the bootstrap function</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>boot_results <span class="ot">&lt;-</span> <span class="fu">bootstrap_pums</span>(<span class="at">df =</span> df_in, <span class="at">num_samples =</span> <span class="dv">500</span>, <span class="at">group_vars =</span> <span class="fu">c</span>(YEAR, race))</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>df_plt <span class="ot">&lt;-</span> df_wide <span class="sc">%&gt;%</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(boot_results, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"race"</span>, <span class="st">"YEAR"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(<span class="at">Year =</span> YEAR,</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">Race =</span> race,</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>            <span class="at">Percent =</span> <span class="dv">100</span> <span class="sc">*</span> percent_hspd,</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>            <span class="at">me =</span> <span class="dv">100</span> <span class="sc">*</span> <span class="fl">1.96</span> <span class="sc">*</span> sd) <span class="sc">%&gt;%</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Race <span class="sc">!=</span> <span class="st">"All Others"</span>) <span class="co"># When plotting All Others overlaps White and having five lines makes it quite hard to read. </span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a><span class="co"># At this point I'll introduce a function to plot multiple groups over time, since we'll use this again </span></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>plt_by <span class="ot">&lt;-</span> <span class="cf">function</span>(df, group_var, <span class="at">title_text =</span> <span class="st">""</span>) {</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>  plt <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> df, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Percent, <span class="at">group =</span> {{group_var}}, <span class="at">colour =</span> {{group_var}})) <span class="sc">+</span></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> Percent <span class="sc">-</span> me, <span class="at">ymax =</span> Percent <span class="sc">+</span> me), <span class="at">width =</span> .<span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> title_text, <span class="at">x =</span> <span class="st">"Year"</span>, <span class="at">y =</span> <span class="st">"Percent"</span>) <span class="sc">+</span></span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>  plt</span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a>plt_race <span class="ot">&lt;-</span> <span class="fu">plt_by</span>(df_plt, Race, <span class="at">title_text =</span> <span class="st">"High Speed Internet Access by Race and Ethnicity"</span>)</span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a>plt_race</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-44-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="poverty-status" class="level3">
<h3 class="anchored" data-anchor-id="poverty-status">Poverty Status</h3>
<p>I’m going to skip showing the code for Poverty, Age, and Geography because it’s extremely similar to the code used for Race. The poverty variable in the IPUMS data is measured in income as a percent of the poverty line. So for this analysis I code under 100 as being in poverty, between 100 and 200 percent of the poverty line as near poverty, and above 200 percent as not being in poverty.</p>
<div class="cell">

</div>
<div class="cell">
<div class="cell-output-display">

<div id="npvlawpatz" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#npvlawpatz) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 12px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 50%;
  border-top-style: solid;
  border-top-width: 3px;
  border-top-color: #D3D3D3;
  border-right-style: solid;
  border-right-width: 3px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 3px;
  border-bottom-color: #D3D3D3;
  border-left-style: solid;
  border-left-width: 3px;
  border-left-color: #D3D3D3;
}

:where(#npvlawpatz) .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#npvlawpatz) .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

:where(#npvlawpatz) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#npvlawpatz) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#npvlawpatz) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#npvlawpatz) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#npvlawpatz) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#npvlawpatz) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#npvlawpatz) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#npvlawpatz) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#npvlawpatz) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#npvlawpatz) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

:where(#npvlawpatz) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#npvlawpatz) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#npvlawpatz) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#npvlawpatz) .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#npvlawpatz) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#npvlawpatz) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#npvlawpatz) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#npvlawpatz) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#npvlawpatz) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#npvlawpatz) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#npvlawpatz) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#npvlawpatz) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#npvlawpatz) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#npvlawpatz) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#npvlawpatz) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#npvlawpatz) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#npvlawpatz) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#npvlawpatz) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#npvlawpatz) .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#npvlawpatz) .gt_left {
  text-align: left;
}

:where(#npvlawpatz) .gt_center {
  text-align: center;
}

:where(#npvlawpatz) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#npvlawpatz) .gt_font_normal {
  font-weight: normal;
}

:where(#npvlawpatz) .gt_font_bold {
  font-weight: bold;
}

:where(#npvlawpatz) .gt_font_italic {
  font-style: italic;
}

:where(#npvlawpatz) .gt_super {
  font-size: 65%;
}

:where(#npvlawpatz) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#npvlawpatz) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#npvlawpatz) .gt_indent_1 {
  text-indent: 5px;
}

:where(#npvlawpatz) .gt_indent_2 {
  text-indent: 10px;
}

:where(#npvlawpatz) .gt_indent_3 {
  text-indent: 15px;
}

:where(#npvlawpatz) .gt_indent_4 {
  text-indent: 20px;
}

:where(#npvlawpatz) .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  <thead class="gt_header">
    <tr>
      <td colspan="7" class="gt_heading gt_title gt_font_normal" style="">Table 8: High Speed Internet Access in 2018</td>
    </tr>
    <tr>
      <td colspan="7" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style="">By Poverty Status</td>
    </tr>
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="2" colspan="1" scope="col" id="Poverty Status">Poverty Status</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="3" scope="colgroup" id="Percent">
        <span class="gt_column_spanner">Percent</span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="3" scope="colgroup" id="Number of People">
        <span class="gt_column_spanner">Number of People</span>
      </th>
    </tr>
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Yes">Yes</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="No">No</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="NA">NA</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Yes">Yes</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="No">No</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="NA">NA</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="poverty" class="gt_row gt_center">In Poverty</td>
<td headers="percent_hspd" class="gt_row gt_center">53%</td>
<td headers="percent_no" class="gt_row gt_center">47%</td>
<td headers="percent_NA" class="gt_row gt_center">4%</td>
<td headers="Yes" class="gt_row gt_center">376K</td>
<td headers="No" class="gt_row gt_center">335K</td>
<td headers="NA" class="gt_row gt_center">30.6K</td></tr>
    <tr><td headers="poverty" class="gt_row gt_center gt_striped">Near Poverty</td>
<td headers="percent_hspd" class="gt_row gt_center gt_striped">62%</td>
<td headers="percent_no" class="gt_row gt_center gt_striped">38%</td>
<td headers="percent_NA" class="gt_row gt_center gt_striped">4%</td>
<td headers="Yes" class="gt_row gt_center gt_striped">499K</td>
<td headers="No" class="gt_row gt_center gt_striped">311K</td>
<td headers="NA" class="gt_row gt_center gt_striped">29.7K</td></tr>
    <tr><td headers="poverty" class="gt_row gt_center">Not in Poverty</td>
<td headers="percent_hspd" class="gt_row gt_center">78%</td>
<td headers="percent_no" class="gt_row gt_center">22%</td>
<td headers="percent_NA" class="gt_row gt_center">2%</td>
<td headers="Yes" class="gt_row gt_center">2.09M</td>
<td headers="No" class="gt_row gt_center">595K</td>
<td headers="NA" class="gt_row gt_center">64.8K</td></tr>
  </tbody>
  <tfoot class="gt_sourcenotes">
    <tr>
      <td class="gt_sourcenote" colspan="7">Yes and No percentages are calculated out of those who answered. NA is reported out of all the data to provide context on how much data is missing.</td>
    </tr>
    <tr>
      <td class="gt_sourcenote" colspan="7">Source: Author's analysis of IPUMS data.</td>
    </tr>
  </tfoot>
  
</table>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-48-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="age" class="level3">
<h3 class="anchored" data-anchor-id="age">Age</h3>
<p>The age varible in IPUMS is the most straightforward, it’s just numeric age. It is worth pointing out that this is based on individual ages, while high speed internet is a household level variable. If we really wanted to do a deep dive into just age, we’d want to look at the age composition of the whole household. The really nice thing about microdata is you can slice and dice it any way you think is appropriate. So if you want to look at households that have individuals under 18 and over 65, you can. If you want to look at households with no one under 65, you can. I’ve just taken a high level cut of the data here though.</p>
<div class="cell">

</div>
<div class="cell">
<div class="cell-output-display">

<div id="xihovtakgy" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#xihovtakgy) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 12px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 50%;
  border-top-style: solid;
  border-top-width: 3px;
  border-top-color: #D3D3D3;
  border-right-style: solid;
  border-right-width: 3px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 3px;
  border-bottom-color: #D3D3D3;
  border-left-style: solid;
  border-left-width: 3px;
  border-left-color: #D3D3D3;
}

:where(#xihovtakgy) .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#xihovtakgy) .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

:where(#xihovtakgy) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#xihovtakgy) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#xihovtakgy) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#xihovtakgy) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#xihovtakgy) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#xihovtakgy) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#xihovtakgy) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#xihovtakgy) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#xihovtakgy) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#xihovtakgy) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

:where(#xihovtakgy) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#xihovtakgy) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#xihovtakgy) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#xihovtakgy) .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#xihovtakgy) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#xihovtakgy) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#xihovtakgy) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#xihovtakgy) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#xihovtakgy) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#xihovtakgy) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#xihovtakgy) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#xihovtakgy) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#xihovtakgy) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#xihovtakgy) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#xihovtakgy) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#xihovtakgy) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#xihovtakgy) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#xihovtakgy) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#xihovtakgy) .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#xihovtakgy) .gt_left {
  text-align: left;
}

:where(#xihovtakgy) .gt_center {
  text-align: center;
}

:where(#xihovtakgy) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#xihovtakgy) .gt_font_normal {
  font-weight: normal;
}

:where(#xihovtakgy) .gt_font_bold {
  font-weight: bold;
}

:where(#xihovtakgy) .gt_font_italic {
  font-style: italic;
}

:where(#xihovtakgy) .gt_super {
  font-size: 65%;
}

:where(#xihovtakgy) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#xihovtakgy) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#xihovtakgy) .gt_indent_1 {
  text-indent: 5px;
}

:where(#xihovtakgy) .gt_indent_2 {
  text-indent: 10px;
}

:where(#xihovtakgy) .gt_indent_3 {
  text-indent: 15px;
}

:where(#xihovtakgy) .gt_indent_4 {
  text-indent: 20px;
}

:where(#xihovtakgy) .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  <thead class="gt_header">
    <tr>
      <td colspan="7" class="gt_heading gt_title gt_font_normal" style="">Table 9: High Speed Internet Access in 2018</td>
    </tr>
    <tr>
      <td colspan="7" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style="">By Age Group</td>
    </tr>
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="2" colspan="1" scope="col" id="Age Group">Age Group</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="3" scope="colgroup" id="Percent">
        <span class="gt_column_spanner">Percent</span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="3" scope="colgroup" id="Number of People">
        <span class="gt_column_spanner">Number of People</span>
      </th>
    </tr>
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Yes">Yes</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="No">No</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="NA">NA</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Yes">Yes</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="No">No</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="NA">NA</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="age" class="gt_row gt_center">18 and under</td>
<td headers="percent_hspd" class="gt_row gt_center">74%</td>
<td headers="percent_no" class="gt_row gt_center">26%</td>
<td headers="percent_NA" class="gt_row gt_center">2%</td>
<td headers="Yes" class="gt_row gt_center">760K</td>
<td headers="No" class="gt_row gt_center">263K</td>
<td headers="NA" class="gt_row gt_center">26.0K</td></tr>
    <tr><td headers="age" class="gt_row gt_center gt_striped">19 to 64</td>
<td headers="percent_hspd" class="gt_row gt_center gt_striped">72%</td>
<td headers="percent_no" class="gt_row gt_center gt_striped">28%</td>
<td headers="percent_NA" class="gt_row gt_center gt_striped">3%</td>
<td headers="Yes" class="gt_row gt_center gt_striped">1.81M</td>
<td headers="No" class="gt_row gt_center gt_striped">691K</td>
<td headers="NA" class="gt_row gt_center gt_striped">76.7K</td></tr>
    <tr><td headers="age" class="gt_row gt_center">65+</td>
<td headers="percent_hspd" class="gt_row gt_center">58%</td>
<td headers="percent_no" class="gt_row gt_center">42%</td>
<td headers="percent_NA" class="gt_row gt_center">3%</td>
<td headers="Yes" class="gt_row gt_center">398K</td>
<td headers="No" class="gt_row gt_center">288K</td>
<td headers="NA" class="gt_row gt_center">22.4K</td></tr>
  </tbody>
  <tfoot class="gt_sourcenotes">
    <tr>
      <td class="gt_sourcenote" colspan="7">Yes and No percentages are calculated out of those who answered. NA is reported out of all the data to provide context on how much data is missing.</td>
    </tr>
    <tr>
      <td class="gt_sourcenote" colspan="7">Source: Author's analysis of IPUMS data.</td>
    </tr>
  </tfoot>
  
</table>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-54-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="geography" class="level3">
<h3 class="anchored" data-anchor-id="geography">Geography</h3>
<p>IPUMs provides categorizations of where people live as either being in a prinicipal city, in the metro but not the principal city, or outside of a metro area. I have chosen to present this as the more familiar (and shorter) urban, suburban, and rural. IPUMS also has a direct measure of density that would be useful in an analysis - but for tables and graphs the categorial variable is better.</p>
<div class="cell">

</div>
<div class="cell">
<div class="cell-output-display">

<div id="nmmdfrvztw" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#nmmdfrvztw) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 12px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 50%;
  border-top-style: solid;
  border-top-width: 3px;
  border-top-color: #D3D3D3;
  border-right-style: solid;
  border-right-width: 3px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 3px;
  border-bottom-color: #D3D3D3;
  border-left-style: solid;
  border-left-width: 3px;
  border-left-color: #D3D3D3;
}

:where(#nmmdfrvztw) .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#nmmdfrvztw) .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

:where(#nmmdfrvztw) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#nmmdfrvztw) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#nmmdfrvztw) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#nmmdfrvztw) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#nmmdfrvztw) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#nmmdfrvztw) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#nmmdfrvztw) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#nmmdfrvztw) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#nmmdfrvztw) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#nmmdfrvztw) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

:where(#nmmdfrvztw) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#nmmdfrvztw) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#nmmdfrvztw) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#nmmdfrvztw) .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#nmmdfrvztw) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#nmmdfrvztw) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#nmmdfrvztw) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#nmmdfrvztw) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#nmmdfrvztw) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#nmmdfrvztw) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#nmmdfrvztw) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#nmmdfrvztw) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#nmmdfrvztw) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#nmmdfrvztw) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#nmmdfrvztw) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#nmmdfrvztw) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#nmmdfrvztw) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#nmmdfrvztw) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#nmmdfrvztw) .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#nmmdfrvztw) .gt_left {
  text-align: left;
}

:where(#nmmdfrvztw) .gt_center {
  text-align: center;
}

:where(#nmmdfrvztw) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#nmmdfrvztw) .gt_font_normal {
  font-weight: normal;
}

:where(#nmmdfrvztw) .gt_font_bold {
  font-weight: bold;
}

:where(#nmmdfrvztw) .gt_font_italic {
  font-style: italic;
}

:where(#nmmdfrvztw) .gt_super {
  font-size: 65%;
}

:where(#nmmdfrvztw) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#nmmdfrvztw) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#nmmdfrvztw) .gt_indent_1 {
  text-indent: 5px;
}

:where(#nmmdfrvztw) .gt_indent_2 {
  text-indent: 10px;
}

:where(#nmmdfrvztw) .gt_indent_3 {
  text-indent: 15px;
}

:where(#nmmdfrvztw) .gt_indent_4 {
  text-indent: 20px;
}

:where(#nmmdfrvztw) .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  <thead class="gt_header">
    <tr>
      <td colspan="7" class="gt_heading gt_title gt_font_normal" style="">Table 10: High Speed Internet Access in 2018</td>
    </tr>
    <tr>
      <td colspan="7" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style="">By Metropolitan Status</td>
    </tr>
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="2" colspan="1" scope="col" id="Metropolitan Status">Metropolitan Status</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="3" scope="colgroup" id="Percent">
        <span class="gt_column_spanner">Percent</span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="3" scope="colgroup" id="Number of People">
        <span class="gt_column_spanner">Number of People</span>
      </th>
    </tr>
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Yes">Yes</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="No">No</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="NA">NA</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Yes">Yes</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="No">No</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="NA">NA</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="metro" class="gt_row gt_center">City</td>
<td headers="percent_hspd" class="gt_row gt_center">85%</td>
<td headers="percent_no" class="gt_row gt_center">15%</td>
<td headers="percent_NA" class="gt_row gt_center">3%</td>
<td headers="Yes" class="gt_row gt_center">257K</td>
<td headers="No" class="gt_row gt_center">46.2K</td>
<td headers="NA" class="gt_row gt_center">8.16K</td></tr>
    <tr><td headers="metro" class="gt_row gt_center gt_striped">Mixed/Unknown</td>
<td headers="percent_hspd" class="gt_row gt_center gt_striped">68%</td>
<td headers="percent_no" class="gt_row gt_center gt_striped">32%</td>
<td headers="percent_NA" class="gt_row gt_center gt_striped">3%</td>
<td headers="Yes" class="gt_row gt_center gt_striped">1.60M</td>
<td headers="No" class="gt_row gt_center gt_striped">752K</td>
<td headers="NA" class="gt_row gt_center gt_striped">74.7K</td></tr>
    <tr><td headers="metro" class="gt_row gt_center">Rural</td>
<td headers="percent_hspd" class="gt_row gt_center">67%</td>
<td headers="percent_no" class="gt_row gt_center">33%</td>
<td headers="percent_NA" class="gt_row gt_center">3%</td>
<td headers="Yes" class="gt_row gt_center">694K</td>
<td headers="No" class="gt_row gt_center">341K</td>
<td headers="NA" class="gt_row gt_center">35.4K</td></tr>
    <tr><td headers="metro" class="gt_row gt_center gt_striped">Suburbs</td>
<td headers="percent_hspd" class="gt_row gt_center gt_striped">81%</td>
<td headers="percent_no" class="gt_row gt_center gt_striped">19%</td>
<td headers="percent_NA" class="gt_row gt_center gt_striped">1%</td>
<td headers="Yes" class="gt_row gt_center gt_striped">420K</td>
<td headers="No" class="gt_row gt_center gt_striped">102K</td>
<td headers="NA" class="gt_row gt_center gt_striped">6.77K</td></tr>
  </tbody>
  <tfoot class="gt_sourcenotes">
    <tr>
      <td class="gt_sourcenote" colspan="7">Yes and No percentages are calculated out of those who answered. NA is reported out of all the data to provide context on how much data is missing.</td>
    </tr>
    <tr>
      <td class="gt_sourcenote" colspan="7">Source: Author's analysis of IPUMS data.</td>
    </tr>
  </tfoot>
  
</table>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-60-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
</section>
<section id="mapping-the-data" class="level1">
<h1>Mapping the Data</h1>
<p>To map the data you’ll need to first get shapefiles for Public Use Microdata Areas. The tradeoff for using microdata is that it’s not available down to the tract level. It’s individual responses, so to protect the privacy of respondents all geographic areas have to include at least 100,000 people. Those areas are drawn by the census and are the public use microdata areas mentioned above. You can get shapefiles for them from the census <a href="https://www.census.gov/geographies/mapping-files/time-series/geo/tiger-line-file.html">here</a>. You’ll need to unzip the folder and then the <code>rgdal</code> package points at the entire unzipped folder, not just an individual file.</p>
<p>There are a lot of options for mapping in R. I’ve chosen to use <code>sf</code> and <code>ggplot2</code> because it works well with the tidyverse and uses familiar ggplot2 syntax. I really like the <code>leaflet</code> package for making interactive maps, but static maps also have their place, and that’s what I’ve gone with here.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up shapefile as an sf object</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>ky_shp <span class="ot">&lt;-</span> <span class="fu">readOGR</span>(<span class="st">"tl_2019_21_puma10"</span>, <span class="at">layer =</span> <span class="st">"tl_2019_21_puma10"</span>, <span class="at">GDAL1_integer64_policy =</span> <span class="cn">TRUE</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>ky_shp<span class="sc">@</span>data<span class="sc">$</span>PUMA <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(ky_shp<span class="sc">@</span>data<span class="sc">$</span>PUMACE10))</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>ky_sf <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(ky_shp)</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate internet access at the PUMA level</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>df_group <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(YEAR <span class="sc">==</span> <span class="dv">2018</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(hspd_int, PUMA) <span class="sc">%&gt;%</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">count =</span> <span class="fu">sum</span>(PERWT), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Pivot for easier percent calculations</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>df_wide <span class="ot">&lt;-</span> df_group  <span class="sc">%&gt;%</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> PUMA, <span class="at">names_from =</span> hspd_int, <span class="at">values_from =</span> count) <span class="sc">%&gt;%</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent_hspd =</span> (Yes <span class="sc">/</span> (Yes <span class="sc">+</span> No)),</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>         <span class="at">percent_no =</span> <span class="dv">1</span> <span class="sc">-</span> percent_hspd)</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>int_puma <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">PUMA =</span> df_wide<span class="sc">$</span>PUMA,</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">int_per =</span> df_wide<span class="sc">$</span>percent_no <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>ky_sf <span class="ot">&lt;-</span> <span class="fu">full_join</span>(ky_sf, int_puma, <span class="at">by =</span> <span class="st">"PUMA"</span>)</span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(ky_sf) <span class="sc">+</span> </span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill=</span>int_per)) <span class="sc">+</span></span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">"blue"</span>, <span class="at">high =</span> <span class="st">"purple"</span>, <span class="at">name =</span> <span class="st">"Percent"</span>) <span class="sc">+</span></span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.border =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"People in Households without High Speed Internet Access"</span>,</span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">"Map is shaded by percent of people without high speed access in each Public Use Microdata Area"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-62-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<section id="school-age-children" class="level2">
<h2 class="anchored" data-anchor-id="school-age-children">School Age Children</h2>
<p>As I’ve mentioned, a nice feature of using microdata is that you can look at the data in ways that aren’t available in the premade Census tabulations. With a lot of school districts using online learning, a look at the percent of school age children (ages 5-18) without high speed internet access at home could be useful for policymakers. Here we can see that there are parts of Western Kentucky where up to 60% do not have high speed access at home.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">#need to recreate the sf object for the joins to work correctly</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>ky_sf <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(ky_shp)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate internet access at the PUMA level</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>df_group <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(YEAR <span class="sc">==</span> <span class="dv">2018</span> <span class="sc">&amp;</span> AGE <span class="sc">&gt;=</span> <span class="dv">5</span> <span class="sc">&amp;</span> AGE <span class="sc">&lt;=</span> <span class="dv">18</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(hspd_int, PUMA) <span class="sc">%&gt;%</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">count =</span> <span class="fu">sum</span>(PERWT), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Pivot for easier percent calculations</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>df_wide <span class="ot">&lt;-</span> df_group  <span class="sc">%&gt;%</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> PUMA, <span class="at">names_from =</span> hspd_int, <span class="at">values_from =</span> count) <span class="sc">%&gt;%</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent_hspd =</span> (Yes <span class="sc">/</span> (Yes <span class="sc">+</span> No)),</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>         <span class="at">percent_no =</span> <span class="dv">1</span> <span class="sc">-</span> percent_hspd)</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>int_puma <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">PUMA =</span> df_wide<span class="sc">$</span>PUMA,</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">int_per =</span> df_wide<span class="sc">$</span>percent_no <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">int_num =</span> df_wide<span class="sc">$</span>No</span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>ky_sf <span class="ot">&lt;-</span> <span class="fu">full_join</span>(ky_sf, int_puma, <span class="at">by =</span> <span class="st">"PUMA"</span>)</span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(ky_sf) <span class="sc">+</span> </span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill=</span>int_per)) <span class="sc">+</span></span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">"blue"</span>, <span class="at">high =</span> <span class="st">"purple"</span>, <span class="at">name =</span> <span class="st">"Percent"</span>) <span class="sc">+</span></span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.border =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Children ages 5-18 in Households without High Speed Internet Access"</span>,</span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">"Map is shaded by percent of children without high speed access in each Public Use Microdata Area"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-64-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<section id="louisville-jefferson-county-with-labels" class="level3">
<h3 class="anchored" data-anchor-id="louisville-jefferson-county-with-labels">Louisville (Jefferson County) with Labels</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">#need to recreate the sf object for the joins to work correctly</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>ky_sf <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(ky_shp) <span class="sc">%&gt;%</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(PUMA <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"1701"</span>, <span class="st">"1702"</span>, <span class="st">"1703"</span>, <span class="st">"1704"</span>, <span class="st">"1705"</span>, <span class="st">"1706"</span>))</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate internet access at the PUMA level</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter to only the PUMAs in Jefferson County</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>df_group <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(YEAR <span class="sc">==</span> <span class="dv">2018</span> <span class="sc">&amp;</span> AGE <span class="sc">&gt;=</span> <span class="dv">5</span> <span class="sc">&amp;</span> AGE <span class="sc">&lt;=</span> <span class="dv">18</span> <span class="sc">&amp;</span> PUMA <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"1701"</span>, <span class="st">"1702"</span>, <span class="st">"1703"</span>, <span class="st">"1704"</span>, <span class="st">"1705"</span>, <span class="st">"1706"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(hspd_int, PUMA) <span class="sc">%&gt;%</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">count =</span> <span class="fu">sum</span>(PERWT), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Pivot for easier percent calculations</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>df_wide <span class="ot">&lt;-</span> df_group  <span class="sc">%&gt;%</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> PUMA, <span class="at">names_from =</span> hspd_int, <span class="at">values_from =</span> count) <span class="sc">%&gt;%</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent_hspd =</span> (Yes <span class="sc">/</span> (Yes <span class="sc">+</span> No)),</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>         <span class="at">percent_no =</span> <span class="dv">1</span> <span class="sc">-</span> percent_hspd)</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>int_puma <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">PUMA =</span> df_wide<span class="sc">$</span>PUMA,</span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">int_per =</span> df_wide<span class="sc">$</span>percent_no <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">int_num =</span> formattable<span class="sc">::</span><span class="fu">comma</span>(<span class="fu">round</span>(df_wide<span class="sc">$</span>No, <span class="sc">-</span><span class="dv">2</span>), <span class="at">digits =</span> <span class="dv">0</span>)</span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>ky_sf <span class="ot">&lt;-</span> <span class="fu">full_join</span>(ky_sf, int_puma, <span class="at">by =</span> <span class="st">"PUMA"</span>)</span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(ky_sf) <span class="sc">+</span> </span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill=</span>int_per)) <span class="sc">+</span></span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf_label</span>(<span class="fu">aes</span>(<span class="at">label =</span> int_num, <span class="at">fontface =</span> <span class="st">"bold"</span>)) <span class="sc">+</span></span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">"blue"</span>, <span class="at">high =</span> <span class="st">"purple"</span>, <span class="at">name =</span> <span class="st">"Percent"</span>) <span class="sc">+</span></span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb18-32"><a href="#cb18-32" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb18-33"><a href="#cb18-33" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb18-34"><a href="#cb18-34" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb18-35"><a href="#cb18-35" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.border =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb18-36"><a href="#cb18-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Children ages 5-18 in Households without High Speed Internet Access in Jefferson County"</span>,</span>
<span id="cb18-37"><a href="#cb18-37" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">"Map is shaded by percent of children without access in each Public Use Microdata Area and </span></span>
<span id="cb18-38"><a href="#cb18-38" aria-hidden="true" tabindex="-1"></a><span class="st">       the number of children without access is given by the label rounded to the nearest 100"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in st_point_on_surface.sfc(sf::st_zm(x)): st_point_on_surface may not
give correct results for longitude/latitude data</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-66-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
</section>
<section id="conclusion-and-next-steps" class="level1">
<h1>Conclusion and next steps</h1>
<p>The one thing we haven’t really touched on in this blog is applying this data. The focus is here is intentionally on getting to know the data and making descriptive statistics. A clear next step to making the analysis useful though is to start talking to subject matter experts. Is internet access better in other states? Other countries? Are there cities where access is higher? How did they do it? What’s the history of our broadband infrastructure? I recommend this <a href="https://www.theatlantic.com/technology/archive/2020/08/virtual-learning-when-you-dont-have-internet/615322/">article</a> from the Atlantic as a starting point if you’re interested in the high speed internet question. No matter what data you’re analyzing though, you’ll need to put it in context both to know how to explore and model it, and also to communicate the results in a way that will be meaningful to other people.</p>
<p>Once you get the hang of working with Census microdata it unlocks the ability to answer some really interesting questions. Like all analytics work, it’s important to first get to know the data, which is why we spent so long at the top of this post making wrong tables until figuring out the data structure. Visualizing uncertainty is also important when working with survey data. There are still a few places this analysis could be cleaned up. As one example, while I made functions for bootstrapping standard errors and for graphing the data over time, some of the cleaning code could be functionalized rather than repeated. The code should also be rearranged so that all the data gets recoded at the beginning rather than doing it piecemeal on an as needed basis. We could also start to look at how the categories we’ve analyzed (race, poverty, age, geography) overlap, either using more detailed crosstabs or by building some models. The goal here though was to show what a full analysis would look like, including stumbling through some of the initial exploration of the data.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="natekratzer/blog_comments" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->



</body></html>